2020-01-16 14:53:22,698 [8156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:53:22,744 [8156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:53:22,752 [8156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:53:22,756 [8156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:53:22,761 [8156] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:53:22,762 [8156] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:53:23,604 [17872] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 14:53:25,922 [17872] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 14:53:30,997 [9088] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 14:53:31,034 [9088] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 14:53:31,068 [9088] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 14:53:31,076 [9088] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:53:31,077 [9088] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 14:53:33,530 [17872] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:53:33,530 [17872] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by id
2020-01-16 14:53:33,539 [17872] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 14:53:37,082 [17872] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 14:53:37,097 [17872] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 14:53:37,302 [17872] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 14:53:37,310 [17872] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 14:53:37,311 [17872] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:53:37,313 [17872] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 14:53:37,339 [17872] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:53:37,341 [17872] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 14:53:37,342 [17872] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:53:37,342 [17872] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 14:53:37,344 [17872] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:53:37,344 [17872] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 14:53:37,346 [17872] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:53:37,346 [17872] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 14:53:37,378 [17872] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:53:37,378 [17872] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 14:53:38,424 [17872] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:53:38,424 [17872] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 14:54:07,700 [11400] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 14:54:07,720 [11400] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 14:54:07,725 [11400] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:54:07,754 [11400] DEBUG Erp - update erp_construction set [id] = '0', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '33', [guige] = '122', [zhuangdinfa] = '44443', [baozhuangfa] = '44', [address] = '3', [delivery_date] = '2020-01-23 14:53:37', [source_no] = '555', [remark] = '33333333333333333333333333333', [state] = '0', [create_time] = '2020-01-16 14:53:37', [create_username] = '超级管理员' where  no =  'TO2020010000'
2020-01-16 14:54:07,762 [11400] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 87
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:e798fbac-fd6d-4f04-853b-c8080df9d97d
Error Number:8102,State:1,Class:16
2020-01-16 14:54:07,829 [11400] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 159
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:e798fbac-fd6d-4f04-853b-c8080df9d97d
Error Number:8102,State:1,Class:16
2020-01-16 14:55:15,534 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:55:15,549 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:55:15,554 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:55:15,554 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:55:15,556 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:55:15,556 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:55:15,969 [16828] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 14:55:18,511 [16828] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 14:55:24,343 [16828] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 14:55:24,372 [16828] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 14:55:24,404 [16828] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 14:55:24,406 [16828] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:55:24,406 [16828] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 14:55:29,668 [16828] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:55:29,669 [16828] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by id
2020-01-16 14:55:29,693 [16828] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 14:55:31,815 [16828] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 14:55:31,819 [16828] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 14:55:31,992 [12104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 14:55:31,999 [12104] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 14:55:32,000 [12104] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:55:32,001 [12104] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 14:55:32,018 [12104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:55:32,019 [12104] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 14:55:32,021 [12104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:55:32,021 [12104] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 14:55:32,022 [12104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:55:32,023 [12104] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 14:55:32,025 [12104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:55:32,025 [12104] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 14:55:32,058 [12104] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:55:32,058 [12104] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 14:55:33,198 [9612] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:55:33,198 [9612] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 14:56:03,939 [16828] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 14:56:03,964 [16828] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 14:56:03,993 [16828] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:56:04,020 [16828] DEBUG Erp - update erp_construction set [id] = '0', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '1', [guige] = '22', [zhuangdinfa] = '22', [baozhuangfa] = '33', [address] = '33', [delivery_date] = '2020-01-23 14:55:32', [source_no] = '4', [remark] = '4444444444444444444444', [state] = '0', [create_time] = '2020-01-16 14:55:32', [create_username] = '超级管理员' where  no =  'TO2020010000'
2020-01-16 14:56:04,029 [16828] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 87
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:56a96d4a-5dd5-44eb-afbf-f15c9b4e7fd1
Error Number:8102,State:1,Class:16
2020-01-16 14:56:04,098 [16828] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 159
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:56a96d4a-5dd5-44eb-afbf-f15c9b4e7fd1
Error Number:8102,State:1,Class:16
2020-01-16 14:56:16,734 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:16,776 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:16,783 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:16,787 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:16,794 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:16,794 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:17,531 [16828] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 14:56:26,183 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:26,212 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:26,218 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:26,218 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:26,222 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:26,222 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:56:26,917 [16828] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 14:56:29,917 [9612] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 14:56:45,707 [8568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 14:56:45,753 [8568] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 14:56:45,772 [8568] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 14:56:45,774 [8568] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:56:45,774 [8568] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 14:56:46,918 [13500] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:56:46,918 [13500] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by id
2020-01-16 14:56:46,928 [13500] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 14:56:49,487 [13500] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 14:56:49,492 [13500] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 14:56:49,650 [8568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 14:56:49,659 [8568] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 14:56:49,660 [8568] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:56:49,663 [8568] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 14:56:49,688 [8568] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:56:49,689 [8568] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 14:56:49,691 [8568] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:56:49,691 [8568] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 14:56:49,693 [8568] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:56:49,693 [8568] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 14:56:49,696 [8568] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:56:49,696 [8568] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 14:56:49,724 [8568] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:56:49,724 [8568] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 14:56:50,950 [13500] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:56:50,951 [13500] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 14:56:59,181 [8568] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 14:56:59,199 [8568] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 14:56:59,201 [8568] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:56:59,217 [8568] DEBUG Erp - update erp_construction set [id] = '0', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '33', [guige] = '22', [zhuangdinfa] = '11', [baozhuangfa] = '44', [address] = '33', [delivery_date] = '2020-01-23 14:56:49', [source_no] = '55', [remark] = '666666', [state] = '0', [create_time] = '2020-01-16 14:56:49', [create_username] = '超级管理员' where  no =  'TO2020010000'
2020-01-16 14:56:59,221 [8568] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseUpdateBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Update\BaseUpdateBuilder.cs:行号 29
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 87
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:96a43791-6f38-4bac-956b-3392c75a3179
Error Number:8102,State:1,Class:16
2020-01-16 14:56:59,255 [8568] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 无法更新标识列 'id'。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:96a43791-6f38-4bac-956b-3392c75a3179
Error Number:8102,State:1,Class:16
2020-01-16 14:57:41,483 [11980] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:57:41,520 [11980] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:57:41,529 [11980] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:57:41,530 [11980] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:57:41,535 [11980] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:57:41,536 [11980] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 14:57:42,185 [16828] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 14:57:45,304 [9612] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 14:57:46,714 [16828] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 14:57:46,729 [16828] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 14:57:46,738 [16828] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 14:57:46,740 [16828] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:57:46,741 [16828] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 14:57:47,689 [8568] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:57:47,689 [8568] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by id
2020-01-16 14:57:47,704 [8568] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 14:57:48,181 [12132] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 14:57:48,185 [12132] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 14:57:48,332 [9612] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 14:57:48,340 [9612] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 14:57:48,342 [9612] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 14:57:48,343 [9612] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 14:57:48,366 [9612] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:57:48,367 [9612] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 14:57:48,368 [9612] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:57:48,368 [9612] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 14:57:48,370 [9612] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:57:48,370 [9612] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 14:57:48,371 [9612] DEBUG Serviceerp_construction - 获取字段
2020-01-16 14:57:48,371 [9612] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 14:57:48,395 [9612] DEBUG Servicesys_code - 获取动态列表
2020-01-16 14:57:48,395 [9612] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 14:57:49,720 [12132] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 14:57:49,721 [12132] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 14:57:58,836 [12132] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 14:57:58,856 [12132] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 14:57:58,860 [12132] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 14:57:58,882 [12132] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '88', [guige] = '22', [zhuangdinfa] = '55', [baozhuangfa] = '66', [address] = '33', [delivery_date] = '2020-01-23 14:57:48', [source_no] = '77', [remark] = '999999', [state] = '0', [create_time] = '2020-01-16 14:57:48', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 14:57:58,900 [12132] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','88','22','55','66','33','2020-01-23 14:57:48','77','999999','0','超级管理员','2020-01-16 14:57:58')
2020-01-16 14:57:58,911 [12132] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:17719c00-c8c4-43cb-b786-1a4423706734
Error Number:544,State:1,Class:16
2020-01-16 14:57:58,947 [12132] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:17719c00-c8c4-43cb-b786-1a4423706734
Error Number:544,State:1,Class:16
2020-01-16 15:00:13,955 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:00:14,014 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:00:14,047 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:00:14,047 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:00:14,051 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:00:14,051 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:00:14,717 [14156] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:00:18,273 [9612] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:00:24,044 [13500] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:00:24,068 [13500] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:00:24,086 [13500] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:00:24,087 [13500] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:00:24,088 [13500] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:00:25,266 [9612] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:00:25,266 [9612] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:00:25,279 [9612] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:00:26,819 [13500] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:00:26,821 [13500] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:00:26,822 [13500] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:00:26,822 [13500] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:00:26,822 [13500] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:00:27,050 [9612] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:00:27,051 [9612] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:00:27,051 [9612] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:00:27,720 [8568] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 15:00:27,730 [8568] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 15:00:27,891 [14156] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:00:27,899 [14156] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:00:27,901 [14156] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:00:27,902 [14156] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:00:27,923 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:00:27,925 [14156] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:00:27,929 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:00:27,929 [14156] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:00:27,931 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:00:27,931 [14156] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:00:27,932 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:00:27,933 [14156] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:00:27,957 [14156] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:00:27,957 [14156] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:00:28,872 [13428] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:00:28,872 [13428] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:00:34,701 [8568] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:00:34,707 [8568] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:00:34,717 [8568] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 15:00:34,728 [8568] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '1', [guige] = '22', [zhuangdinfa] = '5', [baozhuangfa] = '5', [address] = '33', [delivery_date] = '2020-01-23 15:00:27', [source_no] = '6', [remark] = '5', [state] = '0', [create_time] = '2020-01-16 15:00:27', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 15:00:34,786 [8568] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','1','22','5','5','33','2020-01-23 15:00:27','6','5','0','超级管理员','2020-01-16 15:00:34')
2020-01-16 15:00:34,789 [8568] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b8f3c625-217e-41a1-a6d9-09b994906b3a
Error Number:544,State:1,Class:16
2020-01-16 15:00:34,807 [8568] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b8f3c625-217e-41a1-a6d9-09b994906b3a
Error Number:544,State:1,Class:16
2020-01-16 15:03:44,425 [11980] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:03:44,461 [11980] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:03:44,466 [11980] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:03:44,467 [11980] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:03:44,471 [11980] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:03:44,472 [11980] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:03:45,312 [8244] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:03:49,063 [13428] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:03:51,119 [13428] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:03:51,387 [13428] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:03:52,999 [14156] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:03:53,039 [14156] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:03:53,060 [14156] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:03:53,062 [14156] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:03:53,063 [14156] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:04:00,584 [8084] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 15:04:00,591 [8084] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 15:04:00,675 [13428] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:04:00,676 [13428] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:04:00,728 [13428] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:04:00,917 [14156] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:04:00,924 [14156] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:04:00,925 [14156] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:04:00,929 [14156] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:04:00,951 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:04:00,952 [14156] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:04:00,954 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:04:00,954 [14156] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:04:00,957 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:04:00,958 [14156] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:04:00,961 [14156] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:04:00,961 [14156] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:04:00,984 [14156] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:04:00,985 [14156] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:04:01,943 [8084] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:04:01,943 [8084] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:15:14,872 [13428] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:15:14,905 [14156] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:15:14,915 [14156] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:15:14,931 [14156] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:15:14,942 [14156] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:15:14,943 [14156] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:15:36,539 [13428] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:15:36,636 [8244] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:15:36,661 [8244] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:15:36,674 [8244] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 15:15:36,702 [8244] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '1', [guige] = '22', [zhuangdinfa] = '6', [baozhuangfa] = '5', [address] = '33', [delivery_date] = '2020-01-23 15:04:00', [source_no] = '6', [remark] = '44', [state] = '0', [create_time] = '2020-01-16 15:04:00', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 15:15:36,720 [8244] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','1','22','6','5','33','2020-01-23 15:04:00','6','44','0','超级管理员','2020-01-16 15:15:36')
2020-01-16 15:15:36,827 [8244] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:16:17,978 [8244] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:16:23,739 [13428] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:16:26,901 [17104] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:16:26,901 [17104] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:16:26,903 [17104] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 15:16:26,908 [17104] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '1', [guige] = '22', [zhuangdinfa] = '44', [baozhuangfa] = '5', [address] = '33', [delivery_date] = '2020-01-23 14:38:11', [source_no] = '6', [remark] = '4444444', [state] = '0', [create_time] = '2020-01-16 14:38:11', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 15:16:26,914 [13428] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:16:26,924 [17104] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','1','22','44','5','33','2020-01-23 14:38:11','6','4444444','0','超级管理员','2020-01-16 15:16:26')
2020-01-16 15:16:27,015 [17104] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:16:29,374 [17104] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:16:30,003 [13428] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:16:30,007 [13428] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:16:30,007 [13428] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:16:30,009 [13428] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:16:30,009 [13428] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,009 [13428] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:16:30,009 [13428] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,009 [13428] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:16:30,010 [13428] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,010 [13428] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:16:30,010 [13428] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,010 [13428] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:16:30,011 [13428] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:16:30,011 [13428] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:16:30,046 [17104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:16:30,050 [17104] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:16:30,050 [17104] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:16:30,051 [17104] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:16:30,051 [17104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,051 [17104] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:16:30,052 [17104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,052 [17104] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:16:30,052 [17104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,052 [17104] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:16:30,052 [17104] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:16:30,052 [17104] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:16:30,053 [17104] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:16:30,053 [17104] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:16:34,360 [13428] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:16:34,360 [13428] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:16:34,464 [17104] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:16:34,464 [17104] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:16:52,112 [13428] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:16:52,115 [13428] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:16:52,117 [13428] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 15:16:52,119 [13428] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '155', [guige] = '2', [zhuangdinfa] = '44', [baozhuangfa] = '44', [address] = '33', [delivery_date] = '2020-01-23 15:16:30', [source_no] = '33', [remark] = '22222', [state] = '0', [create_time] = '2020-01-16 15:16:30', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 15:16:52,127 [13428] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','155','2','44','44','33','2020-01-23 15:16:30','33','22222','0','超级管理员','2020-01-16 15:16:52')
2020-01-16 15:16:52,234 [13428] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:16:59,418 [13428] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:18:25,326 [13428] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:18:25,327 [13428] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:18:25,330 [13428] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 15:18:25,335 [13428] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '155', [guige] = '2', [zhuangdinfa] = '44', [baozhuangfa] = '44', [address] = '33', [delivery_date] = '2020-01-23 15:16:30', [source_no] = '33', [remark] = '22222', [state] = '0', [create_time] = '2020-01-16 15:16:30', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 15:18:25,347 [13428] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','155','2','44','44','33','2020-01-23 15:16:30','33','22222','0','超级管理员','2020-01-16 15:18:25')
2020-01-16 15:18:25,470 [13428] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:18:39,574 [13428] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:61d007bf-149a-4fff-91da-15a1a1485de4
Error Number:544,State:1,Class:16
2020-01-16 15:19:14,607 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:19:14,639 [7504] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:19:14,646 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:19:14,647 [7504] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:19:14,652 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:19:14,653 [7504] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:19:15,417 [13428] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:19:18,424 [6364] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:19:39,473 [8244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:19:39,509 [8244] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:19:39,526 [8244] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:19:39,528 [8244] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:19:39,529 [8244] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:19:40,759 [8296] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:19:40,760 [8296] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:19:40,773 [8296] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:19:43,155 [6364] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:19:43,162 [6364] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:19:43,162 [6364] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:19:43,176 [6364] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:19:43,176 [6364] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:19:43,528 [8244] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:19:43,529 [8244] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:19:43,529 [8244] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:19:44,135 [6364] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 15:19:44,138 [6364] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 15:19:44,255 [8244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:19:44,262 [8244] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:19:44,263 [8244] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:19:44,265 [8244] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:19:44,286 [8244] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:19:44,287 [8244] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:19:44,288 [8244] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:19:44,288 [8244] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:19:44,294 [8244] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:19:44,294 [8244] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:19:44,296 [8244] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:19:44,296 [8244] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:19:44,320 [8244] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:19:44,320 [8244] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:19:45,364 [8296] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:19:45,364 [8296] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:19:55,527 [6364] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:19:55,541 [6364] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:19:55,543 [6364] DEBUG Erp - select erp_construction.* from erp_construction where  id =  '0'
2020-01-16 15:19:55,559 [6364] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '44', [guige] = '666', [zhuangdinfa] = '55', [baozhuangfa] = '44', [address] = '777', [delivery_date] = '2020-01-23 15:19:44', [source_no] = '55', [remark] = '4444', [state] = '0', [create_time] = '2020-01-16 15:19:44', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 15:19:55,574 [6364] DEBUG Erp - insert into erp_construction([id],[no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO2020010000','0','','','44','666','55','44','777','2020-01-23 15:19:44','55','4444','0','超级管理员','2020-01-16 15:19:55')
2020-01-16 15:19:55,580 [6364] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:045480a4-2f6d-4004-a771-258f42e2e13f
Error Number:544,State:1,Class:16
2020-01-16 15:19:55,630 [6364] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:045480a4-2f6d-4004-a771-258f42e2e13f
Error Number:544,State:1,Class:16
2020-01-16 15:22:22,820 [11980] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:22:22,834 [11980] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:22:22,836 [11980] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:22:22,836 [11980] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:22:22,837 [11980] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:22:22,837 [11980] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:22:23,396 [12444] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:22:27,092 [17508] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:22:29,588 [14780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:22:29,617 [14780] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:22:29,641 [14780] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:22:29,642 [14780] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:22:29,643 [14780] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:22:31,016 [17508] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:22:31,016 [17508] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:22:31,023 [17508] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:22:32,986 [8164] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 15:22:32,990 [8164] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 15:22:33,143 [12444] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:22:33,153 [12444] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:22:33,154 [12444] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:22:33,156 [12444] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:22:33,178 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:22:33,179 [12444] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:22:33,181 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:22:33,181 [12444] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:22:33,182 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:22:33,183 [12444] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:22:33,184 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:22:33,184 [12444] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:22:33,210 [12444] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:22:33,210 [12444] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:22:34,213 [6504] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:22:34,213 [6504] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:22:48,151 [6504] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 15:22:48,163 [6504] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 15:22:48,168 [6504] DEBUG Erp - select erp_construction.* from erp_construction where  id =  ''
2020-01-16 15:22:48,182 [6504] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '0', [product_name] = '', [customer_name] = '', [number] = '66', [guige] = '22', [zhuangdinfa] = '55', [baozhuangfa] = '77', [address] = '33', [delivery_date] = '2020-01-23 15:22:33', [source_no] = '88', [remark] = '99', [state] = '0', [create_time] = '2020-01-16 15:22:33', [create_username] = '超级管理员' where  id =  ''
2020-01-16 15:22:48,194 [6504] DEBUG Erp - insert into erp_construction([no],[product_id],[product_name],[customer_name],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('TO2020010000','0','','','66','22','55','77','33','2020-01-23 15:22:33','88','99','0','超级管理员','2020-01-16 15:22:48')
2020-01-16 15:22:48,204 [6504] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'customer_no'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:288cdadd-6c83-4172-9d3a-d90a956275b6
Error Number:515,State:2,Class:16
2020-01-16 15:22:48,233 [6504] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'customer_no'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:288cdadd-6c83-4172-9d3a-d90a956275b6
Error Number:515,State:2,Class:16
2020-01-16 15:23:08,849 [14780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2020-01-16 15:23:08,858 [14780] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:23:08,859 [14780] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:23:08,860 [14780] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:23:08,860 [14780] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:23:10,511 [15664] DEBUG Servicemms_receive - 获取动态列表
2020-01-16 15:23:10,511 [15664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-16 15:23:10,522 [15664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-16 15:23:11,751 [15208] DEBUG Servicemms_receive - 获取新主键
2020-01-16 15:23:11,754 [15208] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2020-01-16 15:23:11,814 [6504] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/edit')
2020-01-16 15:23:11,821 [6504] DEBUG Servicemms_receive - 获取实体对象
2020-01-16 15:23:11,822 [6504] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '202001160001'
2020-01-16 15:23:11,829 [6504] DEBUG Servicemms_receive - 获取上一条下一条数据
2020-01-16 15:23:11,832 [6504] DEBUG Servicemms_receive - 获取字段
2020-01-16 15:23:11,832 [6504] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:23:11,835 [6504] DEBUG Servicemms_receive - 获取字段
2020-01-16 15:23:11,836 [6504] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '202001160001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:23:11,841 [6504] DEBUG Servicemms_receive - 获取字段
2020-01-16 15:23:11,841 [6504] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '202001160001'and ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:23:11,845 [6504] DEBUG Servicemms_receive - 获取字段
2020-01-16 15:23:11,845 [6504] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:23:11,888 [6504] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:23:11,888 [6504] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:23:11,888 [6504] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:23:11,888 [6504] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:23:11,888 [6504] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:23:11,888 [6504] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-16 15:23:11,889 [6504] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:23:11,889 [6504] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:23:11,891 [6504] DEBUG Servicesys_code - 获取字段
2020-01-16 15:23:11,891 [6504] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'SupplyType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:23:11,896 [6504] DEBUG Servicesys_code - 获取字段
2020-01-16 15:23:11,896 [6504] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:23:13,582 [14780] DEBUG Servicemms_receive - 获取动态列表
2020-01-16 15:23:13,582 [14780] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '202001160001' order by A.MaterialCode
2020-01-16 15:23:15,820 [6504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:23:15,821 [6504] DEBUG Mms - select top 20 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('采购') order by MerchantsCode
2020-01-16 15:23:15,832 [6504] DEBUG Mms - select count(*) from ( select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('采购') ) tb_temp
2020-01-16 15:23:19,353 [12444] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:23:19,354 [12444] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('GY100005') order by MerchantsCode
2020-01-16 15:28:06,434 [12444] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2020-01-16 15:28:06,445 [12444] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:28:06,445 [12444] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:28:08,100 [15664] DEBUG Servicemms_refund - 获取动态列表
2020-01-16 15:28:08,100 [15664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-16 15:28:08,125 [15664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName
     from 
        mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-16 15:28:09,074 [10144] DEBUG Servicemms_refund - 获取新主键
2020-01-16 15:28:09,075 [10144] DEBUG Mms - select isnull(max(BillNo),0) from mms_refund
2020-01-16 15:28:09,139 [14780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/refund/edit')
2020-01-16 15:28:09,157 [14780] DEBUG Servicemms_refund - 获取实体对象
2020-01-16 15:28:09,157 [14780] DEBUG Mms - select mms_refund.* from mms_refund where  BillNo =  '202001160001'
2020-01-16 15:28:09,170 [14780] DEBUG Servicemms_refund - 获取上一条下一条数据
2020-01-16 15:28:09,173 [14780] DEBUG Servicemms_refund - 获取字段
2020-01-16 15:28:09,173 [14780] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:28:09,178 [14780] DEBUG Servicemms_refund - 获取字段
2020-01-16 15:28:09,178 [14780] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo < '202001160001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:28:09,182 [14780] DEBUG Servicemms_refund - 获取字段
2020-01-16 15:28:09,183 [14780] DEBUG Mms - select top 1 BillNo from mms_refund where  BillNo >  '202001160001'and ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:28:09,186 [14780] DEBUG Servicemms_refund - 获取字段
2020-01-16 15:28:09,186 [14780] DEBUG Mms - select top 1 BillNo from mms_refund where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:28:09,217 [14780] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:28:09,218 [14780] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:28:09,218 [14780] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:28:09,218 [14780] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:28:10,518 [8164] DEBUG Servicemms_refund - 获取动态列表
2020-01-16 15:28:10,518 [8164] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum
     from 
        mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId
     where  A.BillNo =  '202001160001' order by A.MaterialCode
2020-01-16 15:28:20,390 [15208] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/return/Index','/Mms/return')
2020-01-16 15:28:20,409 [15208] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:28:20,410 [15208] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:28:20,421 [15208] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:28:20,422 [15208] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-16 15:28:20,428 [15208] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:28:20,428 [15208] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-16 15:28:21,472 [17508] DEBUG Servicemms_return - 获取动态列表
2020-01-16 15:28:21,473 [17508] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName
     from 
        mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-16 15:28:21,491 [17508] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName
     from 
        mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-16 15:28:23,572 [10144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/return/edit')
2020-01-16 15:28:23,597 [10144] DEBUG Servicemms_return - 获取实体对象
2020-01-16 15:28:23,598 [10144] DEBUG Mms - select mms_return.* from mms_return where  BillNo =  '201306060002'
2020-01-16 15:28:23,605 [10144] DEBUG Servicemms_return - 获取上一条下一条数据
2020-01-16 15:28:23,607 [10144] DEBUG Servicemms_return - 获取字段
2020-01-16 15:28:23,608 [10144] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:28:23,611 [10144] DEBUG Servicemms_return - 获取字段
2020-01-16 15:28:23,611 [10144] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo < '201306060002'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:28:23,614 [10144] DEBUG Servicemms_return - 获取字段
2020-01-16 15:28:23,614 [10144] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo >  '201306060002'and ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:28:23,618 [10144] DEBUG Servicemms_return - 获取字段
2020-01-16 15:28:23,618 [10144] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:28:23,664 [10144] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:28:23,664 [10144] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:28:23,665 [10144] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:28:23,665 [10144] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-16 15:28:23,665 [10144] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:28:23,665 [10144] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-16 15:28:23,666 [10144] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:28:23,666 [10144] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:28:23,667 [10144] DEBUG Servicesys_code - 获取字段
2020-01-16 15:28:23,667 [10144] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:28:23,668 [10144] DEBUG Servicesys_code - 获取字段
2020-01-16 15:28:23,668 [10144] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:28:24,536 [12444] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:28:24,537 [12444] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00302') order by MerchantsCode
2020-01-16 15:28:25,120 [17508] DEBUG Servicemms_return - 获取动态列表
2020-01-16 15:28:25,120 [17508] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_returnDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201306060002' order by A.MaterialCode
2020-01-16 15:28:35,312 [6504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:28:35,313 [6504] DEBUG Mms - select top 20 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('采购') order by MerchantsCode
2020-01-16 15:28:35,315 [6504] DEBUG Mms - select count(*) from ( select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('采购') ) tb_temp
2020-01-16 15:28:36,330 [14292] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:28:36,330 [14292] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00304') order by MerchantsCode
2020-01-16 15:28:38,552 [12444] DEBUG Servicemms_materialType - 获取动态列表
2020-01-16 15:28:38,553 [12444] DEBUG Mms - select 
        MaterialTypeName as text,MaterialType as id,ParentCode as pid
     from 
        mms_materialType
     order by MaterialType
2020-01-16 15:28:38,574 [15208] DEBUG Servicemms_material - 获取动态列表
2020-01-16 15:28:39,028 [15208] DEBUG Mms - select top 10 A.*,B.Num as RemainNum,B.Num as StockNum,B.UnitPrice as StockUnitPrice from 
    mms_material A
    inner join mms_warehouseStock B on B.MaterialCode = A.MaterialCode and B.Num >0
    inner join mms_warehouse C on C.WarehouseCode = B.WarehouseCode
   where  C.WarehouseCode =  '201306030001' order by A.MaterialCode
2020-01-16 15:28:39,038 [15208] DEBUG Mms - select count(*) from ( select A.*,B.Num as RemainNum,B.Num as StockNum,B.UnitPrice as StockUnitPrice from 
    mms_material A
    inner join mms_warehouseStock B on B.MaterialCode = A.MaterialCode and B.Num >0
    inner join mms_warehouse C on C.WarehouseCode = B.WarehouseCode
   where  C.WarehouseCode =  '201306030001' ) tb_temp
2020-01-16 15:28:47,585 [10144] DEBUG Servicemms_returnDetail - 获取新主键
2020-01-16 15:28:47,586 [10144] DEBUG Mms - select isnull(max(RowId),0) from mms_returnDetail  where 1 = 1  and  BillNo =  '201306060002'
2020-01-16 15:36:14,542 [14292] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:36:14,889 [15664] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:36:15,657 [9712] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/return/edit')
2020-01-16 15:36:15,662 [9712] DEBUG Servicemms_return - 获取实体对象
2020-01-16 15:36:15,671 [9712] DEBUG Mms - select mms_return.* from mms_return where  BillNo =  '201306060002'
2020-01-16 15:36:15,672 [9712] DEBUG Servicemms_return - 获取上一条下一条数据
2020-01-16 15:36:15,672 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,672 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:36:15,673 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,673 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo < '201306060002'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:36:15,675 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,675 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo >  '201306060002'and ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:36:15,675 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,675 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:36:15,676 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:15,676 [9712] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:36:15,678 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:15,678 [9712] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-16 15:36:15,682 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:15,683 [9712] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-16 15:36:15,683 [9712] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:36:15,683 [9712] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:36:15,684 [9712] DEBUG Servicesys_code - 获取字段
2020-01-16 15:36:15,684 [9712] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:36:15,685 [9712] DEBUG Servicesys_code - 获取字段
2020-01-16 15:36:15,685 [9712] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:36:15,714 [9712] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/return/edit')
2020-01-16 15:36:15,722 [9712] DEBUG Servicemms_return - 获取实体对象
2020-01-16 15:36:15,722 [9712] DEBUG Mms - select mms_return.* from mms_return where  BillNo =  '201306060002'
2020-01-16 15:36:15,725 [9712] DEBUG Servicemms_return - 获取上一条下一条数据
2020-01-16 15:36:15,726 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,726 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:36:15,728 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,728 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo < '201306060002'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:36:15,729 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,729 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo >  '201306060002'and ProjectCode =  '201306030001' order by BillNo
2020-01-16 15:36:15,749 [9712] DEBUG Servicemms_return - 获取字段
2020-01-16 15:36:15,749 [9712] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 15:36:15,750 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:15,750 [9712] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:36:15,751 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:15,751 [9712] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-16 15:36:15,754 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:15,754 [9712] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-16 15:36:15,754 [9712] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:36:15,754 [9712] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:36:15,755 [9712] DEBUG Servicesys_code - 获取字段
2020-01-16 15:36:15,755 [9712] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:36:15,756 [9712] DEBUG Servicesys_code - 获取字段
2020-01-16 15:36:15,756 [9712] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 15:36:17,327 [10144] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:36:17,328 [10144] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00302') order by MerchantsCode
2020-01-16 15:36:18,304 [14780] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:36:18,304 [14780] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00302') order by MerchantsCode
2020-01-16 15:36:18,524 [15664] DEBUG Servicemms_return - 获取动态列表
2020-01-16 15:36:18,525 [15664] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_returnDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201306060002' order by A.MaterialCode
2020-01-16 15:36:18,625 [15028] DEBUG Servicemms_return - 获取动态列表
2020-01-16 15:36:18,625 [15028] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_returnDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201306060002' order by A.MaterialCode
2020-01-16 15:36:25,333 [14292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 15:36:25,337 [14292] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 15:36:25,337 [14292] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 15:36:25,339 [14292] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:25,339 [14292] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 15:36:26,507 [15208] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:36:26,510 [15208] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 15:36:26,510 [15208] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 15:36:28,168 [10144] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 15:36:28,168 [10144] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 15:36:28,452 [12444] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:36:28,461 [12444] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:36:28,462 [12444] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:36:28,462 [12444] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:36:28,463 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:28,463 [12444] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:36:28,465 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:28,465 [12444] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:36:28,465 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:28,465 [12444] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:36:28,465 [12444] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:28,465 [12444] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:36:28,502 [12444] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:28,502 [12444] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:36:29,212 [15664] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:36:29,212 [15664] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:36:54,225 [14780] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:36:54,471 [15028] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:36:55,220 [15120] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:36:55,222 [15120] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:36:55,222 [15120] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:36:55,223 [15120] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:36:55,223 [15120] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:55,223 [15120] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:36:55,223 [15120] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:55,224 [15120] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:36:55,224 [15120] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:55,224 [15120] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:36:55,225 [15120] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:55,225 [15120] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:36:55,225 [15120] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:55,226 [15120] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:36:56,161 [8164] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:36:56,168 [8164] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:36:56,168 [8164] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:36:56,168 [8164] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:36:56,169 [8164] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:56,169 [8164] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:36:56,169 [8164] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:56,169 [8164] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:36:56,169 [8164] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:56,169 [8164] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:36:56,169 [8164] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:36:56,169 [8164] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:36:56,170 [8164] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:36:56,170 [8164] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:36:58,279 [6504] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:36:58,279 [6504] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:36:58,313 [9712] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:36:58,313 [9712] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:37:24,453 [8164] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:37:24,453 [8164] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:37:24,453 [8164] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:37:26,531 [6504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:37:26,531 [6504] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 15:37:28,669 [12444] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:37:28,669 [12444] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:37:28,670 [12444] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:37:30,061 [14292] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:37:30,404 [15208] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:37:30,839 [10144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:37:30,841 [10144] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:37:30,842 [10144] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:37:30,842 [10144] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:37:30,842 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,842 [10144] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:37:30,842 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,842 [10144] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:37:30,842 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,842 [10144] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:37:30,843 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,843 [10144] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:37:30,843 [10144] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:37:30,843 [10144] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:37:30,859 [6504] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:37:30,861 [6504] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:37:30,861 [6504] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:37:30,862 [6504] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:37:30,862 [6504] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,863 [6504] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:37:30,863 [6504] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,863 [6504] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:37:30,863 [6504] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,864 [6504] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:37:30,864 [6504] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:37:30,864 [6504] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:37:30,864 [6504] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:37:30,865 [6504] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:37:33,227 [12444] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:37:33,228 [12444] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:37:33,248 [15120] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:37:33,248 [15120] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:37:34,547 [6504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:37:34,547 [6504] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:37:34,548 [6504] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:37:35,588 [14292] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:37:35,588 [14292] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 15:39:08,743 [14780] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:39:09,157 [8164] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:39:10,104 [15664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:39:10,106 [15664] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:39:10,107 [15664] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:39:10,107 [15664] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:39:10,107 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,107 [15664] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:39:10,108 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,108 [15664] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:39:10,108 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,108 [15664] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:39:10,109 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,109 [15664] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:39:10,109 [15664] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:39:10,109 [15664] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:39:10,129 [15028] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:39:10,134 [15028] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:39:10,134 [15028] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:39:10,135 [15028] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:39:10,135 [15028] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,135 [15028] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:39:10,136 [15028] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,136 [15028] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:39:10,136 [15028] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,136 [15028] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:39:10,137 [15028] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:39:10,137 [15028] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:39:10,138 [15028] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:39:10,138 [15028] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:39:13,471 [15208] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:39:13,471 [15208] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:39:13,513 [17508] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:39:13,514 [17508] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:39:16,784 [15664] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:39:16,785 [15664] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:39:16,786 [15664] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:39:17,693 [15028] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:39:17,694 [15028] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 15:50:16,727 [12444] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:50:17,018 [17508] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 15:50:17,835 [15208] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:50:17,838 [15208] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:50:17,843 [15208] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:50:17,844 [15208] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:50:17,844 [15208] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:17,844 [15208] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:50:17,845 [15208] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:17,845 [15208] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:50:17,845 [15208] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:17,845 [15208] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:50:17,846 [15208] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:17,846 [15208] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:50:17,847 [15208] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:50:17,848 [15208] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:50:18,824 [10144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 15:50:18,826 [10144] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 15:50:18,826 [10144] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 15:50:18,830 [10144] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 15:50:18,830 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:18,830 [10144] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 15:50:18,837 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:18,838 [10144] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 15:50:18,838 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:18,838 [10144] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 15:50:18,839 [10144] DEBUG Serviceerp_construction - 获取字段
2020-01-16 15:50:18,839 [10144] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 15:50:18,839 [10144] DEBUG Servicesys_code - 获取动态列表
2020-01-16 15:50:18,839 [10144] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 15:50:20,949 [14292] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:50:20,949 [14292] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:50:20,987 [15208] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 15:50:20,987 [15208] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 15:50:23,401 [12444] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:50:23,401 [12444] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:50:23,403 [12444] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:50:24,532 [8164] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:50:24,532 [8164] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 15:50:26,964 [10144] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:50:26,964 [10144] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:50:26,965 [10144] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:50:34,766 [15208] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:50:34,766 [15208] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:50:34,767 [15208] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:50:39,501 [6504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:50:39,501 [6504] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:50:39,502 [6504] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:50:53,223 [15120] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:50:53,223 [15120] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:50:53,227 [15120] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:51:06,453 [15120] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:51:06,453 [15120] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:51:06,458 [15120] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:51:07,752 [12444] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:51:07,753 [12444] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 15:51:25,713 [15664] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 15:51:25,713 [15664] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 15:51:25,716 [15664] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 15:59:46,071 [11168] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:59:46,107 [11168] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:59:46,112 [11168] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:59:46,112 [11168] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:59:46,117 [11168] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:59:46,118 [11168] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 15:59:46,712 [15664] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 15:59:50,292 [15028] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:00:27,541 [15120] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:00:27,891 [14292] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:00:30,508 [9712] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:00:30,547 [9712] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:00:30,569 [9712] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:00:30,571 [9712] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:00:30,571 [9712] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:00:32,157 [10144] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:00:32,157 [10144] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:00:32,214 [10144] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:00:33,655 [17508] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:00:33,665 [17508] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:00:33,853 [15664] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:00:33,862 [15664] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:00:33,863 [15664] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:00:33,867 [15664] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:00:33,894 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:00:33,896 [15664] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:00:33,899 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:00:33,899 [15664] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:00:33,902 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:00:33,902 [15664] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:00:33,905 [15664] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:00:33,906 [15664] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:00:33,937 [15664] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:00:33,937 [15664] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:00:34,838 [15208] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:00:34,838 [15208] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:00:38,390 [8164] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:00:38,391 [8164] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:00:38,399 [8164] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:00:39,451 [15120] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:00:39,451 [15120] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:00:54,451 [15028] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:00:54,464 [15028] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:00:54,468 [15028] DEBUG Erp - select erp_construction.* from erp_construction where  id =  ''
2020-01-16 16:00:54,486 [15028] DEBUG Erp - update erp_construction set [no] = 'TO2020010000', [product_id] = '1', [customer_id] = '', [number] = '2', [guige] = '6', [zhuangdinfa] = '55', [baozhuangfa] = '3', [address] = '7', [delivery_date] = '2020-01-23 16:00:33', [source_no] = '4', [remark] = '666666', [state] = '0', [create_time] = '2020-01-16 16:00:33', [create_username] = '超级管理员' where  id =  ''
2020-01-16 16:00:54,499 [15028] DEBUG Erp - insert into erp_construction([no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('TO2020010000','1','','2','6','55','3','7','2020-01-23 16:00:33','4','666666','0','超级管理员','2020-01-16 16:00:54')
2020-01-16 16:01:05,106 [15120] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:01:05,107 [15120] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:01:05,108 [15120] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:01:05,108 [15120] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:01:05,108 [15120] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:01:06,170 [10144] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:01:06,173 [10144] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:01:06,174 [10144] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:02:06,399 [6504] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:02:06,704 [14780] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:02:07,592 [8164] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:02:07,782 [8164] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:02:07,782 [8164] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:02:07,783 [8164] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:02:07,783 [8164] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:02:09,041 [15028] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:02:09,041 [15028] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:02:09,045 [15028] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:02:10,407 [12444] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:02:10,407 [12444] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:02:10,478 [6504] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:02:10,489 [6504] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:02:10,489 [6504] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:02:10,492 [6504] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:02:10,517 [6504] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:02:32,982 [14780] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:02:33,325 [14780] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:02:36,413 [12444] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:02:36,426 [12444] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:02:36,427 [12444] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:02:36,435 [12444] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:02:36,435 [12444] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:02:37,137 [15664] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:02:37,137 [15664] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:02:37,137 [15664] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:02:38,386 [14292] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:02:38,386 [14292] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:02:38,558 [17508] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:02:38,565 [17508] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:02:38,565 [17508] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:02:38,596 [17508] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:05:18,229 [17508] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:05:18,232 [6512] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:05:18,232 [6512] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:05:18,296 [11676] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:05:18,299 [11676] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:05:18,299 [11676] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:05:18,339 [11676] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:05:25,017 [11676] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:09:30,675 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:09:30,744 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:09:30,753 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:09:30,754 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:09:30,760 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:09:30,760 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:09:31,405 [9800] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:09:34,858 [2732] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:09:37,856 [4256] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:09:37,903 [4256] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:09:37,928 [4256] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:09:37,932 [4256] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:09:37,933 [4256] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:09:39,077 [6512] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:09:39,078 [6512] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:09:39,088 [6512] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:09:39,666 [14528] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:09:39,669 [14528] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:09:39,792 [14292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:09:39,799 [14292] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:09:39,801 [14292] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:09:39,805 [14292] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:09:39,824 [14292] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:12:28,486 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:12:28,513 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:12:28,517 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:12:28,517 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:12:28,521 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:12:28,522 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:12:29,328 [4256] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:12:32,307 [11676] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:12:51,643 [11676] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:12:51,674 [11676] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:12:51,688 [11676] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:12:51,689 [11676] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:12:51,689 [11676] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:12:52,684 [5336] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:12:52,685 [5336] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:12:52,695 [5336] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:12:54,867 [11676] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:12:54,870 [11676] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:12:55,745 [4256] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:12:55,793 [4256] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:12:55,794 [4256] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:13:21,182 [4256] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:13:23,004 [4256] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:13:26,919 [11676] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:13:26,919 [11676] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:13:27,053 [5336] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:13:28,858 [5336] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:13:28,858 [5336] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:13:32,850 [5336] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:13:34,220 [5336] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:13:37,197 [8904] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:13:37,197 [8904] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:13:37,379 [4256] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:14:24,816 [4256] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:14:24,819 [4256] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:14:24,824 [4256] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 16:14:24,843 [4256] ERROR /erp/ErpConstruction/edit/TO2020010000 - Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.GetEditMaster(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 86
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionController.Edit(String id) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 39
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:14:45,769 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:14:45,788 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:14:45,791 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:14:45,791 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:14:45,794 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:14:45,794 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:14:46,434 [11676] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:14:49,900 [14468] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:14:51,517 [5336] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:14:51,538 [5336] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:14:51,554 [5336] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:14:51,556 [5336] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:14:51,557 [5336] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:14:52,848 [17764] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:14:52,848 [17764] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:14:52,861 [17764] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:14:53,370 [4256] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:14:53,373 [4256] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:14:53,490 [11676] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:14:53,498 [11676] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:14:53,499 [11676] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:14:53,503 [11676] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:14:53,524 [11676] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:14:53,525 [11676] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:14:53,526 [11676] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:14:53,527 [11676] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:14:53,528 [11676] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:14:53,528 [11676] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:14:53,529 [11676] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:14:53,529 [11676] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:14:53,552 [11676] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:14:53,553 [11676] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:14:54,241 [17764] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:14:54,242 [17764] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:15:53,995 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:15:54,047 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:15:54,060 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:15:54,060 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:15:54,067 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:15:54,072 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:15:54,673 [11676] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:15:57,083 [4256] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:16:03,353 [11676] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:16:03,401 [11676] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:16:03,415 [11676] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:16:03,419 [11676] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:16:03,419 [11676] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:16:04,462 [14468] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:16:04,462 [14468] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:16:04,476 [14468] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:16:37,832 [5336] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:16:49,858 [5336] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:16:50,151 [14468] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:16:52,215 [14468] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:16:52,217 [14468] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:16:52,226 [14468] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:16:52,258 [14468] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:16:52,260 [14468] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:16:52,262 [14468] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:16:52,263 [14468] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:16:52,265 [14468] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:16:52,266 [14468] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:16:52,270 [14468] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:16:52,270 [14468] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:16:52,312 [14468] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:16:52,312 [14468] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:16:53,018 [5336] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:16:53,019 [5336] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:16:53,375 [14468] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:16:53,375 [14468] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:17:13,330 [4256] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:17:54,174 [4256] DEBUG Erp - select isnull(max(no),0) from erp_construction
2020-01-16 16:17:54,319 [16380] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:17:54,323 [16380] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:17:54,323 [16380] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:17:54,324 [16380] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:17:54,324 [16380] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:17:54,324 [16380] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:17:54,324 [16380] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:17:54,324 [16380] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:17:54,325 [16380] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:17:54,325 [16380] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:17:54,326 [16380] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:17:54,326 [16380] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:17:54,326 [16380] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:17:54,326 [16380] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:18:19,374 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:18:19,424 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:18:19,435 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:18:19,436 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:18:19,441 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:18:19,442 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:18:20,230 [5984] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:18:23,949 [7424] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:18:25,798 [13820] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:18:25,821 [13820] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:18:25,842 [13820] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:18:25,843 [13820] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:18:25,844 [13820] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:18:26,789 [4256] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:18:26,789 [4256] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:18:26,799 [4256] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:18:28,271 [8932] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:18:28,281 [8932] DEBUG Erp - select isnull(max(id),0) from erp_construction
2020-01-16 16:18:28,482 [7424] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:18:28,490 [7424] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:18:28,491 [7424] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:18:28,496 [7424] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:18:28,517 [7424] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:18:28,518 [7424] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:18:28,520 [7424] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:18:28,520 [7424] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:18:28,521 [7424] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:18:28,521 [7424] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:18:28,523 [7424] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:18:28,523 [7424] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:18:28,549 [7424] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:18:28,549 [7424] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:18:29,303 [14108] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:18:29,304 [14108] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:18:29,811 [12472] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:18:29,811 [12472] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:18:47,782 [5336] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:18:47,971 [4256] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:18:49,912 [5336] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:18:49,927 [5336] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:18:49,927 [5336] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:18:49,945 [5336] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:18:49,946 [5336] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:18:50,402 [16380] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:18:50,402 [16380] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:18:50,403 [16380] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:18:55,177 [4256] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:19:11,837 [4256] DEBUG Erp - select isnull(max(id),0) from erp_construction
2020-01-16 16:20:03,818 [4256] DEBUG Erp - select isnull(max(id),0) from erp_construction
2020-01-16 16:25:21,581 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:21,619 [13260] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:21,626 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:21,626 [13260] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:21,631 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:21,632 [13260] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:22,811 [15028] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:25:50,575 [14800] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:50,592 [14800] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:50,599 [14800] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:50,599 [14800] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:50,601 [14800] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:50,601 [14800] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:25:50,994 [17696] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:25:56,370 [17696] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:25:59,964 [17696] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:25:59,984 [17696] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:26:00,017 [17696] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:26:00,019 [17696] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:26:00,020 [17696] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:26:01,369 [16420] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:26:01,369 [16420] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:26:01,384 [16420] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:26:06,933 [16420] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:26:06,936 [16420] DEBUG Erp - select isnull(max(id),0) from erp_construction
2020-01-16 16:26:53,435 [16420] DEBUG Erp - select isnull(max(id),0) from erp_construction
2020-01-16 16:28:20,932 [16420] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:30:50,045 [15872] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:30:50,095 [15872] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:30:50,103 [15872] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:30:50,106 [15872] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:30:50,112 [15872] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:30:50,113 [15872] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:30:51,032 [9324] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:30:53,812 [9324] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:31:16,439 [9324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:31:16,457 [9324] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:31:16,473 [9324] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:31:16,474 [9324] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:31:16,474 [9324] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:31:17,429 [7888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:31:17,429 [7888] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:31:17,444 [7888] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:31:18,943 [7888] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:31:18,944 [7888] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:31:19,034 [6620] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:31:19,038 [6620] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:31:19,039 [6620] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:31:19,040 [6620] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:31:19,052 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:31:19,053 [6620] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:31:19,056 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:31:19,056 [6620] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:31:19,057 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:31:19,058 [6620] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:31:19,059 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:31:19,059 [6620] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:31:19,079 [6620] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:31:19,080 [6620] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:31:20,093 [9324] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:31:20,094 [9324] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:31:45,062 [6620] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:31:45,102 [6620] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:31:45,107 [6620] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  '0'
2020-01-16 16:31:45,132 [6620] DEBUG Erp - update  erp_construction set [no] = 'TO202001001', [product_id] = '0', [customer_id] = '', [number] = '44', [guige] = '11', [zhuangdinfa] = '33', [baozhuangfa] = '55', [address] = '22', [delivery_date] = '2020-01-23 16:31:19', [source_no] = '666', [remark] = '33', [state] = '0', [create_time] = '2020-01-16 16:31:19', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 16:31:45,156 [6620] DEBUG Erp - insert into  erp_construction([id],[no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO202001001','0','','44','11','33','55','22','2020-01-23 16:31:19','666','33','0','超级管理员','2020-01-16 16:31:45')
2020-01-16 16:31:45,165 [6620] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c72c3bea-4f32-41bf-b6c3-63cb2e078eeb
Error Number:544,State:1,Class:16
2020-01-16 16:31:45,236 [6620] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:c72c3bea-4f32-41bf-b6c3-63cb2e078eeb
Error Number:544,State:1,Class:16
2020-01-16 16:32:36,563 [18012] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:32:36,564 [18012] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:32:36,652 [9324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:32:36,658 [9324] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:32:36,658 [9324] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO20200100'
2020-01-16 16:32:36,660 [9324] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:32:36,661 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:32:36,661 [9324] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:32:36,662 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:32:36,662 [9324] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO20200100' order by no desc
2020-01-16 16:32:36,666 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:32:36,666 [9324] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO20200100' order by no
2020-01-16 16:32:36,667 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:32:36,667 [9324] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:32:36,674 [9324] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:32:36,674 [9324] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:32:38,247 [6620] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:32:38,247 [6620] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:33:03,019 [14680] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:33:03,020 [14680] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:33:03,021 [14680] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  '0'
2020-01-16 16:33:03,025 [14680] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '0', [customer_id] = '', [number] = '1', [guige] = '122243', [zhuangdinfa] = '434', [baozhuangfa] = '34', [address] = '343', [delivery_date] = '2020-01-23 16:32:36', [source_no] = '3434', [remark] = '4343', [state] = '0', [create_time] = '2020-01-16 16:32:36', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 16:33:03,033 [14680] DEBUG Erp - insert into  erp_construction([id],[no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO20200100','0','','1','122243','434','34','343','2020-01-23 16:32:36','3434','4343','0','超级管理员','2020-01-16 16:33:03')
2020-01-16 16:33:03,037 [14680] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c72c3bea-4f32-41bf-b6c3-63cb2e078eeb
Error Number:544,State:1,Class:16
2020-01-16 16:33:03,056 [14680] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:c72c3bea-4f32-41bf-b6c3-63cb2e078eeb
Error Number:544,State:1,Class:16
2020-01-16 16:33:40,088 [15872] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:33:40,123 [15872] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:33:40,129 [15872] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:33:40,130 [15872] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:33:40,137 [15872] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:33:40,138 [15872] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:33:40,887 [14680] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:33:43,971 [9324] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:33:46,556 [9324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:33:46,572 [9324] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:33:46,587 [9324] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:33:46,588 [9324] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:33:46,589 [9324] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:33:47,613 [14680] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:33:47,614 [14680] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:33:47,628 [14680] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:33:49,233 [14680] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:33:49,235 [14680] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:33:49,797 [14680] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:33:49,839 [14680] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:33:49,840 [14680] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO20200100'
2020-01-16 16:33:49,863 [14680] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:33:49,874 [14680] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:33:49,875 [14680] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:33:49,941 [14680] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:33:49,942 [14680] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO20200100' order by no desc
2020-01-16 16:33:49,950 [14680] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:33:49,950 [14680] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO20200100' order by no
2020-01-16 16:33:49,953 [14680] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:33:49,953 [14680] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:33:49,967 [14680] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:33:49,967 [14680] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:33:50,684 [14680] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:33:50,684 [14680] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:33:56,700 [6620] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:33:56,713 [6620] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:33:56,715 [6620] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  '0'
2020-01-16 16:33:56,728 [6620] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '0', [customer_id] = '', [number] = '1', [guige] = '11', [zhuangdinfa] = '4', [baozhuangfa] = '5', [address] = '22', [delivery_date] = '2020-01-23 16:33:49', [source_no] = '6', [remark] = '33', [state] = '0', [create_time] = '2020-01-16 16:33:49', [create_username] = '超级管理员' where  id =  '0'
2020-01-16 16:33:56,742 [6620] DEBUG Erp - insert into  erp_construction([id],[no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('0','TO20200100','0','','1','11','4','5','22','2020-01-23 16:33:49','6','33','0','超级管理员','2020-01-16 16:33:56')
2020-01-16 16:33:56,747 [6620] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:4af3186f-9b4a-46c9-b0e5-803c03961956
Error Number:544,State:1,Class:16
2020-01-16 16:33:56,780 [6620] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 当 IDENTITY_INSERT 设置为 OFF 时，不能为表 'erp_construction' 中的标识列插入显式值。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:4af3186f-9b4a-46c9-b0e5-803c03961956
Error Number:544,State:1,Class:16
2020-01-16 16:34:44,257 [15368] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:34:44,273 [15368] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:34:44,276 [15368] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:34:44,276 [15368] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:34:44,278 [15368] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:34:44,279 [15368] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:34:44,602 [18424] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:34:48,227 [4496] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:34:49,662 [8548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:34:49,678 [8548] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:34:49,688 [8548] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:34:49,689 [8548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:34:49,689 [8548] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:34:50,679 [6620] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:34:50,679 [6620] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:34:50,692 [6620] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:34:52,718 [18424] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:34:52,721 [18424] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:34:52,865 [9324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:34:52,874 [9324] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:34:52,875 [9324] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO20200100'
2020-01-16 16:34:52,876 [9324] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:34:52,900 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:34:52,901 [9324] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:34:52,904 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:34:52,904 [9324] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO20200100' order by no desc
2020-01-16 16:34:52,906 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:34:52,906 [9324] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO20200100' order by no
2020-01-16 16:34:52,908 [9324] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:34:52,908 [9324] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:34:52,936 [9324] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:34:52,936 [9324] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:34:53,968 [4496] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:34:53,968 [4496] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:35:03,869 [6620] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:35:03,880 [6620] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:35:03,883 [6620] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 16:35:03,898 [6620] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '0', [customer_id] = '', [number] = '1', [guige] = '22', [zhuangdinfa] = '343', [baozhuangfa] = '343', [address] = '33', [delivery_date] = '2020-01-23 16:34:52', [source_no] = '4343', [remark] = '434343', [state] = '0', [create_time] = '2020-01-16 16:34:52', [create_username] = '超级管理员' where  id =  ''
2020-01-16 16:35:03,912 [6620] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('TO20200100','0','','1','22','343','343','33','2020-01-23 16:34:52','4343','434343','0','超级管理员','2020-01-16 16:35:03')
2020-01-16 16:35:10,338 [6620] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:35:10,341 [6620] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:35:10,341 [6620] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:35:10,342 [6620] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:35:10,342 [6620] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:35:10,844 [8548] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:35:10,848 [8548] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:35:10,848 [8548] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:35:12,287 [6620] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:35:12,288 [6620] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:35:12,349 [8548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:35:12,360 [8548] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:35:12,360 [8548] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:35:12,362 [8548] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:35:12,362 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:35:12,362 [8548] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:35:12,376 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:35:12,376 [8548] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:35:12,382 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:35:12,382 [8548] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:35:12,385 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:35:12,387 [8548] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:35:12,395 [8548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:35:12,395 [8548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:35:13,637 [18424] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:35:13,637 [18424] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:35:35,993 [8548] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:35:35,993 [8548] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:35:36,004 [8548] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:35:37,045 [9324] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:35:37,045 [9324] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:36:53,849 [15616] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:36:54,022 [6620] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:36:54,669 [15616] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:36:54,672 [15616] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:36:54,672 [15616] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:36:54,673 [15616] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:36:54,673 [15616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:54,673 [15616] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:36:54,673 [15616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:54,673 [15616] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:36:54,673 [15616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:54,674 [15616] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:36:54,677 [15616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:54,677 [15616] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:36:54,677 [15616] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:36:54,678 [15616] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:36:55,563 [5472] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:36:55,571 [5472] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:36:55,571 [5472] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:36:55,572 [5472] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:36:55,572 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:55,572 [5472] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:36:55,572 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:55,572 [5472] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:36:55,574 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:55,575 [5472] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:36:55,575 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:36:55,575 [5472] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:36:55,576 [5472] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:36:55,576 [5472] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:36:57,980 [8548] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:36:57,980 [8548] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:36:58,002 [6620] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:36:58,003 [6620] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:37:33,986 [15616] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:37:34,309 [6620] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:37:35,123 [8548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:37:35,126 [8548] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:37:35,126 [8548] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:37:35,127 [8548] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:37:35,127 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,127 [8548] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:37:35,129 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,129 [8548] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:37:35,130 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,130 [8548] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:37:35,131 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,131 [8548] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:37:35,133 [8548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:37:35,133 [8548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:37:35,157 [6620] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:37:35,160 [6620] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:37:35,160 [6620] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:37:35,165 [6620] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:37:35,166 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,166 [6620] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:37:35,183 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,183 [6620] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:37:35,188 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,189 [6620] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:37:35,189 [6620] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:37:35,189 [6620] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:37:35,190 [6620] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:37:35,190 [6620] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:37:37,685 [5472] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:37:37,685 [5472] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:37:37,730 [15616] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:37:37,730 [15616] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:38:07,657 [9948] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:38:08,028 [8548] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:38:08,602 [9948] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:38:08,609 [9948] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:38:08,609 [9948] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:38:08,610 [9948] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:38:08,610 [9948] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,610 [9948] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:38:08,610 [9948] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,611 [9948] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:38:08,611 [9948] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,611 [9948] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:38:08,612 [9948] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,612 [9948] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:38:08,613 [9948] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:38:08,613 [9948] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:38:08,643 [9624] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:38:08,651 [9624] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:38:08,651 [9624] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:38:08,685 [9624] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:38:08,685 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,685 [9624] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:38:08,714 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,714 [9624] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:38:08,729 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,729 [9624] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:38:08,730 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:08,730 [9624] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:38:08,737 [9624] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:38:08,737 [9624] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:38:12,571 [5472] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:38:12,571 [5472] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:38:12,650 [8548] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:38:12,650 [8548] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:38:17,294 [5472] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:38:17,294 [5472] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:38:17,390 [5472] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:38:20,584 [9624] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:38:20,584 [9624] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:38:20,585 [9624] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:38:40,649 [8548] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:38:41,014 [9948] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:38:41,596 [17760] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:38:41,603 [17760] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:38:41,603 [17760] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:38:41,604 [17760] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:38:41,604 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,604 [17760] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:38:41,605 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,605 [17760] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:38:41,605 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,605 [17760] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:38:41,606 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,606 [17760] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:38:41,606 [17760] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:38:41,606 [17760] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:38:41,636 [18404] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:38:41,640 [18404] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:38:41,640 [18404] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:38:41,683 [18404] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:38:41,683 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,683 [18404] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:38:41,718 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,718 [18404] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:38:41,729 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,729 [18404] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:38:41,730 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:38:41,730 [18404] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:38:41,731 [18404] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:38:41,732 [18404] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:38:45,278 [9948] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:38:45,278 [9948] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:38:45,336 [5472] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:38:45,337 [5472] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:38:49,029 [5472] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:38:49,029 [5472] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:38:49,029 [5472] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:39:06,548 [9948] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:39:07,227 [8548] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:39:07,670 [9624] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:39:07,672 [9624] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:39:07,673 [9624] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:39:07,673 [9624] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:39:07,673 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,673 [9624] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:39:07,674 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,674 [9624] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:39:07,677 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,677 [9624] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:39:07,678 [9624] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,678 [9624] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:39:07,679 [9624] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:39:07,679 [9624] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:39:07,705 [5472] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:39:07,713 [5472] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:39:07,716 [5472] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:39:07,724 [5472] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:39:07,724 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,724 [5472] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:39:07,729 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,729 [5472] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:39:07,748 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,748 [5472] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:39:07,758 [5472] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:07,758 [5472] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:39:07,788 [5472] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:39:07,788 [5472] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:39:11,392 [18404] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:39:11,392 [18404] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:39:11,441 [9624] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:39:11,441 [9624] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:39:37,204 [18404] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:39:37,526 [5472] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:39:38,076 [18404] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:39:38,078 [18404] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:39:38,078 [18404] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:39:38,079 [18404] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:39:38,079 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,079 [18404] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:39:38,079 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,079 [18404] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:39:38,080 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,080 [18404] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:39:38,080 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,080 [18404] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:39:38,080 [18404] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:39:38,081 [18404] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:39:38,101 [17760] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:39:38,103 [17760] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:39:38,104 [17760] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:39:38,105 [17760] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:39:38,105 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,105 [17760] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:39:38,106 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,106 [17760] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:39:38,106 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,106 [17760] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:39:38,107 [17760] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:39:38,107 [17760] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:39:38,107 [17760] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:39:38,107 [17760] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:39:43,107 [8548] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:39:43,107 [8548] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:39:43,108 [8548] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:41:04,747 [12684] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:41:05,079 [8548] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:41:05,722 [12684] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:41:05,724 [12684] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:41:05,724 [12684] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:41:05,727 [12684] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:41:05,727 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,727 [12684] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:41:05,727 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,727 [12684] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:41:05,728 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,728 [12684] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:41:05,728 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,728 [12684] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:41:05,729 [12684] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:41:05,729 [12684] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:41:05,755 [12084] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:41:05,758 [12084] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:41:05,758 [12084] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:41:05,769 [12084] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:41:05,769 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,769 [12084] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:41:05,770 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,770 [12084] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:41:05,770 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,770 [12084] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:41:05,771 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:05,771 [12084] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:41:05,772 [12084] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:41:05,772 [12084] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:41:09,353 [8548] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:41:09,353 [8548] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:41:09,435 [18404] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:41:09,435 [18404] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:41:12,680 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:41:12,680 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:41:12,681 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:41:25,191 [12084] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:41:25,437 [18404] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:41:25,975 [12084] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:41:25,981 [12084] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:41:25,981 [12084] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:41:25,982 [12084] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:41:25,982 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:25,982 [12084] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:41:25,984 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:25,984 [12084] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:41:25,984 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:25,984 [12084] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:41:25,985 [12084] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:25,985 [12084] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:41:25,989 [12084] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:41:25,989 [12084] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:41:26,010 [8548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:41:26,015 [8548] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:41:26,015 [8548] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:41:26,015 [8548] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:41:26,016 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:26,016 [8548] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:41:26,016 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:26,016 [8548] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:41:26,016 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:26,016 [8548] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:41:26,017 [8548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:41:26,017 [8548] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:41:26,019 [8548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:41:26,020 [8548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:41:29,548 [18404] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:41:29,548 [18404] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:41:29,590 [12684] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:41:29,590 [12684] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:41:38,247 [12084] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:41:38,248 [12084] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:41:38,250 [12084] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:42:13,127 [8548] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:42:13,386 [12888] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:42:14,101 [6956] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:42:14,106 [6956] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:42:14,106 [6956] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:42:14,107 [6956] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:42:14,107 [6956] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:14,107 [6956] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:42:14,108 [6956] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:14,108 [6956] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:42:14,109 [6956] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:14,109 [6956] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:42:14,109 [6956] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:14,109 [6956] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:42:14,110 [6956] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:42:14,110 [6956] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:42:15,482 [18404] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:42:15,548 [18404] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:42:15,548 [18404] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:42:15,614 [18404] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:42:15,614 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:15,614 [18404] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:42:15,682 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:15,682 [18404] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:42:15,748 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:15,748 [18404] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:42:15,783 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:15,783 [18404] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:42:15,822 [18404] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:42:15,822 [18404] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:42:17,954 [12684] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:42:17,954 [12684] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:42:18,022 [14488] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:42:18,023 [14488] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:42:51,720 [18404] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:42:51,872 [12888] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:42:52,594 [18404] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:42:52,597 [18404] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:42:52,598 [18404] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:42:52,598 [18404] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:42:52,598 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:52,598 [18404] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:42:52,599 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:52,599 [18404] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:42:52,600 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:52,600 [18404] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:42:52,600 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:52,600 [18404] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:42:52,601 [18404] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:42:52,601 [18404] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:42:53,558 [12684] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:42:53,561 [12684] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:42:53,561 [12684] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:42:53,562 [12684] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:42:53,562 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:53,562 [12684] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:42:53,563 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:53,563 [12684] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:42:53,563 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:53,563 [12684] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:42:53,564 [12684] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:42:53,564 [12684] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:42:53,565 [12684] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:42:53,565 [12684] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:42:56,051 [12888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:42:56,052 [12888] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:42:56,105 [14488] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:42:56,105 [14488] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:43:03,688 [4180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:43:03,730 [4180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:43:03,737 [4180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:43:03,738 [4180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:43:03,742 [4180] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:43:03,743 [4180] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:43:04,487 [7548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Edit')
2020-01-16 16:43:04,539 [7548] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:43:04,557 [7548] DEBUG Erp - select erp_construction.* from erp_construction where  no =  ''
2020-01-16 16:43:04,563 [7548] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:43:04,599 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:04,600 [7548] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:43:04,604 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:04,604 [7548] DEBUG Erp - select top 1 no from erp_construction where  no < '' order by no desc
2020-01-16 16:43:04,608 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:04,608 [7548] DEBUG Erp - select top 1 no from erp_construction where  no >  '' order by no
2020-01-16 16:43:04,612 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:04,612 [7548] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:43:04,671 [7548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:43:04,673 [7548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:43:10,507 [12684] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:43:10,507 [12684] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:43:19,142 [18404] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:43:20,722 [12888] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:43:21,097 [14488] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:43:21,098 [14488] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:43:21,098 [14488] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:43:21,099 [14488] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:43:21,099 [14488] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,099 [14488] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:43:21,099 [14488] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,099 [14488] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:43:21,099 [14488] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,100 [14488] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:43:21,102 [14488] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,102 [14488] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:43:21,109 [14488] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:43:21,109 [14488] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:43:21,136 [7548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:43:21,155 [7548] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:43:21,155 [7548] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:43:21,160 [7548] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:43:21,160 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,160 [7548] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:43:21,172 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,172 [7548] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:43:21,179 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,179 [7548] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:43:21,180 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:43:21,180 [7548] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:43:21,181 [7548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:43:21,181 [7548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:43:21,691 [18404] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:43:21,691 [18404] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:43:22,232 [9392] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:43:22,232 [9392] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:43:24,100 [12888] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:24,100 [12888] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:43:24,107 [12888] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:25,215 [14488] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:25,215 [14488] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:43:27,477 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:27,477 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:43:27,480 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:32,797 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:32,797 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:43:32,798 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:33,611 [14488] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:33,614 [14488] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:43:33,615 [14488] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:34,406 [12684] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:34,406 [12684] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:43:34,407 [12684] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:37,423 [12888] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:37,423 [12888] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:43:37,423 [12888] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:42,011 [9392] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:42,011 [9392] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') order by id
2020-01-16 16:43:42,012 [9392] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') ) tb_temp
2020-01-16 16:43:51,087 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:43:51,088 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') order by id
2020-01-16 16:43:51,088 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') ) tb_temp
2020-01-16 16:44:31,450 [18404] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:44:31,759 [7548] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:44:32,401 [6616] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:44:32,413 [6616] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:44:32,413 [6616] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:44:32,423 [7548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:44:32,425 [6616] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:44:32,425 [6616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,425 [6616] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:44:32,436 [7548] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:44:32,438 [6616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,438 [6616] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:44:32,450 [7548] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:44:32,450 [7548] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:44:32,450 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,451 [7548] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:44:32,451 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,451 [7548] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:44:32,451 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,451 [7548] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:44:32,452 [7548] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,452 [7548] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:44:32,452 [7548] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:44:32,452 [7548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:44:32,463 [6616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,463 [6616] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:44:32,467 [6616] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:44:32,468 [6616] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:44:32,468 [6616] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:44:32,468 [6616] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:44:35,581 [12888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:44:35,582 [12888] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:44:35,621 [6616] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:44:35,621 [6616] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:45:01,915 [11980] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2020-01-16 16:45:01,924 [11980] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:45:01,925 [11980] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:45:01,926 [11980] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:01,927 [11980] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:45:03,762 [6616] DEBUG Servicemms_receive - 获取动态列表
2020-01-16 16:45:03,763 [6616] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-16 16:45:03,784 [6616] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-16 16:45:04,988 [9424] DEBUG Servicemms_receive - 获取新主键
2020-01-16 16:45:04,991 [9424] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2020-01-16 16:45:05,061 [6616] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/edit')
2020-01-16 16:45:05,068 [6616] DEBUG Servicemms_receive - 获取实体对象
2020-01-16 16:45:05,068 [6616] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '202001160001'
2020-01-16 16:45:05,072 [6616] DEBUG Servicemms_receive - 获取上一条下一条数据
2020-01-16 16:45:05,074 [6616] DEBUG Servicemms_receive - 获取字段
2020-01-16 16:45:05,074 [6616] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2020-01-16 16:45:05,087 [6616] DEBUG Servicemms_receive - 获取字段
2020-01-16 16:45:05,088 [6616] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '202001160001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 16:45:05,104 [6616] DEBUG Servicemms_receive - 获取字段
2020-01-16 16:45:05,104 [6616] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '202001160001'and ProjectCode =  '201306030001' order by BillNo
2020-01-16 16:45:05,119 [6616] DEBUG Servicemms_receive - 获取字段
2020-01-16 16:45:05,119 [6616] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-16 16:45:05,164 [6616] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:05,164 [6616] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:45:05,165 [6616] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:05,165 [6616] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:45:05,165 [6616] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:05,165 [6616] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-16 16:45:05,166 [6616] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:45:05,166 [6616] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:45:05,168 [6616] DEBUG Servicesys_code - 获取字段
2020-01-16 16:45:05,168 [6616] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'SupplyType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 16:45:05,168 [6616] DEBUG Servicesys_code - 获取字段
2020-01-16 16:45:05,168 [6616] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-16 16:45:06,273 [18404] DEBUG Servicemms_receive - 获取动态列表
2020-01-16 16:45:06,273 [18404] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '202001160001' order by A.MaterialCode
2020-01-16 16:45:20,284 [18404] DEBUG Servicemms_receive - 编辑记录
2020-01-16 16:45:20,299 [18404] DEBUG Servicemms_receive - 获取动态对象
2020-01-16 16:45:20,302 [18404] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '202001160001'
2020-01-16 16:45:20,330 [18404] DEBUG Mms - update mms_receive set [BillDate] = '2020-01-16 16:45:05', [DoPerson] = '超级管理员', [SupplierCode] = '', [ContractCode] = '22', [ReceiveDate] = '2020-01-16 16:45:05', [PayKind] = '085', [Remark] = '33', [ProjectCode] = '201306030001', [UpdatePerson] = '超级管理员', [UpdateDate] = '2020-01-16 16:45:20' where  BillNo =  '202001160001'
2020-01-16 16:45:20,353 [18404] DEBUG Mms - insert into mms_receive([BillNo],[BillDate],[DoPerson],[SupplierCode],[ContractCode],[ReceiveDate],[PayKind],[Remark],[ProjectCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('202001160001','2020-01-16 16:45:05','超级管理员','','22','2020-01-16 16:45:05','085','33','201306030001','超级管理员','2020-01-16 16:45:20','超级管理员','2020-01-16 16:45:20')
2020-01-16 16:45:24,042 [2648] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:45:24,048 [2648] DEBUG Mms - select top 20 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('采购') order by MerchantsCode
2020-01-16 16:45:24,051 [2648] DEBUG Mms - select count(*) from ( select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  B.MerchantsProperty in ('采购') ) tb_temp
2020-01-16 16:45:30,410 [9424] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:45:30,646 [11980] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:45:31,319 [2648] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:45:31,322 [2648] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:45:31,323 [2648] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:45:31,323 [2648] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:45:31,323 [2648] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:31,324 [2648] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:45:31,324 [2648] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:31,324 [2648] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:45:31,325 [2648] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:31,325 [2648] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:45:31,325 [2648] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:31,325 [2648] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:45:31,326 [2648] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:31,326 [2648] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:45:32,180 [7644] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:45:32,184 [7644] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:45:32,184 [7644] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001001'
2020-01-16 16:45:32,185 [7644] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:45:32,188 [7644] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:32,189 [7644] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:45:32,193 [7644] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:32,193 [7644] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001001' order by no desc
2020-01-16 16:45:32,199 [7644] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:32,199 [7644] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001001' order by no
2020-01-16 16:45:32,199 [7644] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:45:32,199 [7644] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:45:32,202 [7644] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:32,202 [7644] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:45:34,685 [12888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:45:34,685 [12888] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:45:34,756 [18404] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:45:34,756 [18404] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:45:47,209 [9424] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:45:47,210 [9424] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:45:47,211 [9424] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 16:45:47,214 [9424] DEBUG Erp - update  erp_construction set [no] = 'TO202001001', [product_id] = '', [customer_id] = '', [number] = '4', [guige] = '11', [zhuangdinfa] = '33', [baozhuangfa] = '4', [address] = '22', [delivery_date] = '2020-01-23 16:45:32', [source_no] = '4', [remark] = '3334444', [state] = '0', [create_time] = '2020-01-16 16:45:32', [create_username] = '超级管理员' where  id =  ''
2020-01-16 16:45:47,224 [9424] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('TO202001001','','','4','11','33','4','22','2020-01-23 16:45:32','4','3334444','0','超级管理员','2020-01-16 16:45:47')
2020-01-16 16:45:58,882 [11980] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:45:58,890 [11980] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:45:58,890 [11980] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:45:58,894 [11980] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:45:58,894 [11980] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:45:59,663 [12888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:45:59,663 [12888] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:45:59,669 [12888] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:46:00,480 [18404] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:46:00,481 [18404] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:46:00,521 [12888] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:46:00,527 [12888] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:46:00,528 [12888] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:46:00,529 [12888] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:46:00,529 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:00,529 [12888] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:46:00,529 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:00,530 [12888] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:46:00,532 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:00,532 [12888] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:46:00,534 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:00,534 [12888] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:46:00,545 [12888] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:46:00,545 [12888] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:46:01,919 [18404] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:46:01,919 [18404] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:46:08,516 [12888] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:46:08,516 [12888] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:46:08,518 [12888] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:46:18,226 [9424] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:46:18,227 [9424] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:46:18,227 [9424] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:46:31,016 [18404] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:46:31,346 [300] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:46:31,949 [12888] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:46:31,951 [12888] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:46:31,951 [12888] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:46:31,952 [12888] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:46:31,952 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,952 [12888] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:46:31,952 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,952 [12888] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:46:31,953 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,953 [12888] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:46:31,953 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,953 [12888] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:46:31,954 [12888] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:46:31,954 [12888] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:46:31,982 [16252] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:46:31,985 [16252] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:46:31,985 [16252] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:46:31,985 [16252] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:46:31,985 [16252] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,986 [16252] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:46:31,986 [16252] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,986 [16252] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:46:31,986 [16252] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,986 [16252] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:46:31,987 [16252] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:46:31,987 [16252] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:46:31,987 [16252] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:46:31,987 [16252] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:46:34,397 [9424] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:46:34,398 [9424] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:46:34,429 [12888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:46:34,429 [12888] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:46:36,454 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:46:36,454 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:46:36,456 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:46:39,553 [11980] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:46:39,554 [11980] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:46:41,116 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:46:41,116 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:46:41,117 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:47:21,353 [18404] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:47:21,659 [12888] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:47:22,173 [300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:47:22,176 [300] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:47:22,176 [300] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:47:22,177 [300] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:47:22,177 [300] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,177 [300] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:47:22,177 [300] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,177 [300] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:47:22,178 [300] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,178 [300] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:47:22,178 [300] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,178 [300] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:47:22,179 [300] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:47:22,179 [300] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:47:22,216 [18404] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:47:22,219 [18404] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:47:22,219 [18404] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:47:22,221 [18404] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:47:22,221 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,221 [18404] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:47:22,222 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,222 [18404] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:47:22,232 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,232 [18404] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:47:22,232 [18404] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:22,232 [18404] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:47:22,233 [18404] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:47:22,234 [18404] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:47:25,830 [12888] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:47:25,830 [12888] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:47:25,925 [300] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:47:25,926 [300] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:47:27,896 [300] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:47:27,896 [300] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:47:27,897 [300] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:47:30,838 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:47:30,838 [18404] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 16:47:47,847 [16732] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:47:48,166 [18144] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:47:48,766 [12888] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:47:48,768 [12888] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:47:48,768 [12888] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:47:48,770 [12888] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:47:48,770 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,770 [12888] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:47:48,771 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,771 [12888] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:47:48,772 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,772 [12888] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:47:48,773 [12888] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,773 [12888] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:47:48,773 [12888] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:47:48,773 [12888] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:47:48,799 [16732] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:47:48,803 [16732] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:47:48,803 [16732] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 16:47:48,804 [16732] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:47:48,804 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,805 [16732] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:47:48,805 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,805 [16732] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001002' order by no desc
2020-01-16 16:47:48,818 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,818 [16732] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001002' order by no
2020-01-16 16:47:48,835 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:47:48,835 [16732] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:47:48,859 [16732] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:47:48,859 [16732] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:47:51,249 [17428] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:47:51,249 [17428] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:47:51,299 [17352] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:47:51,299 [17352] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:47:53,353 [18404] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:47:53,354 [18404] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:47:53,370 [18404] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:48:03,789 [18144] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 16:48:03,790 [18144] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 16:48:03,790 [18144] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 16:48:03,791 [18144] DEBUG Erp - update  erp_construction set [no] = 'TO202001002', [product_id] = '', [customer_id] = '', [number] = '1', [guige] = '2', [zhuangdinfa] = '2', [baozhuangfa] = '3', [address] = '1', [delivery_date] = '2020-01-23 16:47:48', [source_no] = '2', [remark] = '333333', [state] = '0', [create_time] = '2020-01-16 16:47:48', [create_username] = '超级管理员' where  id =  ''
2020-01-16 16:48:03,799 [18144] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[remark],[state],[create_username],[create_time]) values('TO202001002','','','1','2','2','3','1','2020-01-23 16:47:48','2','333333','0','超级管理员','2020-01-16 16:48:03')
2020-01-16 16:48:12,543 [16732] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:48:12,545 [16732] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:48:12,546 [16732] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:48:12,547 [16732] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:48:12,547 [16732] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:48:13,389 [18144] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:48:13,389 [18144] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:48:13,393 [18144] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:48:14,566 [12888] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:48:14,567 [12888] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:48:14,641 [16732] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:48:14,659 [16732] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:48:14,659 [16732] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001003'
2020-01-16 16:48:14,661 [16732] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:48:14,661 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:48:14,661 [16732] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:48:14,663 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:48:14,663 [16732] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001003' order by no desc
2020-01-16 16:48:14,666 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:48:14,666 [16732] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001003' order by no
2020-01-16 16:48:14,668 [16732] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:48:14,668 [16732] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:48:14,669 [16732] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:48:14,669 [16732] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:48:16,294 [17428] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:48:16,294 [17428] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:48:32,206 [16732] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 16:48:32,206 [16732] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 16:48:32,207 [16732] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 16:48:39,065 [12888] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:48:39,266 [300] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:48:39,967 [12888] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:48:39,970 [12888] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:48:39,971 [12888] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:48:39,971 [12888] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:48:39,972 [12888] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:48:40,738 [300] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:48:40,738 [300] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:48:40,739 [300] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:48:46,233 [16732] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:48:46,233 [16732] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by SupplierName asc
2020-01-16 16:48:46,236 [16732] ERROR Serviceerp_construction - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'SupplierName' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass43_0.<GetDynamicList>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:bd7b2204-1e89-4996-bde6-b7dfc95cb1a7
Error Number:207,State:1,Class:16
2020-01-16 16:48:46,281 [16732] ERROR /api/erp/ErpConstruction - System.Data.SqlClient.SqlException (0x80131904): 列名 'SupplierName' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 ERP.Web.Areas.Erp.Controllers.ErpConstructionApiController.Get(RequestWrapper query) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Controllers\ErpConstructionController.cs:行号 106
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:bd7b2204-1e89-4996-bde6-b7dfc95cb1a7
Error Number:207,State:1,Class:16
2020-01-16 16:48:46,783 [17352] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:48:46,784 [17352] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by no asc
2020-01-16 16:48:46,786 [17352] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:53:02,175 [18412] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:53:02,577 [18088] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:53:03,571 [8220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:53:03,575 [8220] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:53:03,575 [8220] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:53:03,576 [8220] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:53:03,576 [8220] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:53:05,114 [16584] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:53:05,114 [16584] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:53:05,115 [16584] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:54:03,030 [11904] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:54:03,033 [11904] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:54:03,034 [11904] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:54:03,036 [11904] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:54:03,036 [11904] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:54:03,637 [11904] ERROR /erp/ErpConstruction - System.Web.HttpParseException (0x80004005): “<”在代码块开头无效。只有标识符、关键字、注释、“(”和“{”才有效。

   在 System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
   在 System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
   在 System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   在 System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:54:15,941 [8220] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:54:16,442 [11904] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:54:17,083 [8220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:54:17,085 [8220] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:54:17,086 [8220] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:54:17,087 [8220] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:54:17,087 [8220] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:54:17,121 [8220] ERROR /erp/ErpConstruction - System.Web.HttpParseException (0x80004005): “<”在代码块开头无效。只有标识符、关键字、注释、“(”和“{”才有效。

   在 System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
   在 System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
   在 System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   在 System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2020-01-16 16:54:44,654 [18412] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:54:45,175 [16100] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:54:45,980 [18088] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:54:45,985 [18088] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:54:45,985 [18088] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:54:45,986 [18088] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:54:45,986 [18088] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:54:47,080 [11904] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:54:47,080 [11904] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:54:47,080 [11904] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:55:09,169 [16100] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:55:09,518 [16412] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:55:10,500 [16100] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:55:10,536 [16100] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:55:10,536 [16100] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:55:10,557 [16100] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:55:10,557 [16100] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:55:11,431 [11904] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:55:11,432 [11904] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:55:11,438 [11904] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:55:27,836 [16412] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:55:28,207 [16100] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:55:28,769 [11904] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:55:28,774 [11904] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:55:28,774 [11904] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:55:28,774 [11904] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:55:28,774 [11904] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:55:30,348 [16412] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:55:30,348 [16412] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:55:30,357 [16412] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:56:38,139 [16412] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:56:38,140 [16412] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:56:38,228 [8220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:56:38,238 [8220] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:56:38,239 [8220] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001003'
2020-01-16 16:56:38,242 [8220] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:56:38,242 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:56:38,242 [8220] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:56:38,245 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:56:38,245 [8220] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001003' order by no desc
2020-01-16 16:56:38,247 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:56:38,247 [8220] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001003' order by no
2020-01-16 16:56:38,255 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:56:38,255 [8220] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:56:38,258 [8220] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:56:38,258 [8220] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:56:40,201 [8220] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:56:40,201 [8220] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:56:57,557 [10216] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:56:57,560 [10216] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:56:57,561 [10216] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:56:57,563 [10216] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:56:57,563 [10216] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:57:06,298 [8220] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:57:06,872 [10216] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:57:07,686 [8220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:57:07,688 [8220] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:57:07,688 [8220] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:57:07,689 [8220] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:57:07,689 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,689 [8220] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:57:07,689 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,689 [8220] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:57:07,691 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,691 [8220] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:57:07,693 [8220] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,693 [8220] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:57:07,695 [8220] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:57:07,695 [8220] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:57:07,716 [10216] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:57:07,718 [10216] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:57:07,718 [10216] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:57:07,719 [10216] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:57:07,719 [10216] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,719 [10216] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:57:07,719 [10216] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,719 [10216] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:57:07,719 [10216] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,719 [10216] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:57:07,720 [10216] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:07,720 [10216] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:57:07,720 [10216] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:57:07,720 [10216] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:57:08,064 [10216] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:57:08,580 [8220] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:57:09,526 [16412] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:57:09,528 [16412] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:57:09,528 [16412] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:57:09,528 [16412] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:57:09,528 [16412] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,528 [16412] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:57:09,529 [16412] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,529 [16412] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:57:09,529 [16412] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,529 [16412] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:57:09,530 [16412] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,530 [16412] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:57:09,530 [16412] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:57:09,530 [16412] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:57:09,557 [11904] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:57:09,559 [11904] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:57:09,560 [11904] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO2020010000'
2020-01-16 16:57:09,560 [11904] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:57:09,560 [11904] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,560 [11904] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:57:09,561 [11904] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,561 [11904] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO2020010000' order by no desc
2020-01-16 16:57:09,561 [11904] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,561 [11904] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO2020010000' order by no
2020-01-16 16:57:09,562 [11904] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:57:09,562 [11904] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:57:09,563 [11904] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:57:09,563 [11904] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:57:13,543 [11904] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:57:13,543 [11904] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:57:13,569 [10216] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:57:13,569 [10216] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:57:36,737 [16412] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:57:37,235 [10216] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:57:38,043 [17008] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:57:38,045 [17008] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:57:38,045 [17008] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:57:38,046 [17008] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:57:38,046 [17008] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:57:39,924 [17008] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:57:39,924 [17008] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:57:39,925 [17008] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:57:43,992 [8220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:57:44,002 [8220] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:57:44,002 [8220] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:57:44,012 [8220] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:57:44,012 [8220] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:57:45,549 [11904] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:57:45,549 [11904] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:57:45,554 [11904] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:58:15,730 [11904] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:58:15,734 [11904] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:58:15,735 [11904] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:58:15,735 [11904] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:58:15,735 [11904] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:59:18,026 [16376] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:59:18,043 [16376] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:59:18,046 [16376] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:59:18,046 [16376] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:59:18,048 [16376] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:59:18,048 [16376] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 16:59:18,722 [4600] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 16:59:21,815 [9200] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 16:59:24,000 [4600] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:59:24,025 [4600] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:59:24,065 [4600] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:59:24,077 [4600] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:59:24,077 [4600] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:59:24,586 [9200] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:59:24,586 [9200] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:59:24,596 [9200] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:59:29,576 [4600] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 16:59:29,578 [4600] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 16:59:32,628 [9200] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 16:59:35,000 [9200] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 16:59:35,002 [9200] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001003'
2020-01-16 16:59:35,003 [9200] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 16:59:35,029 [9200] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:59:35,030 [9200] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 16:59:35,032 [9200] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:59:35,033 [9200] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001003' order by no desc
2020-01-16 16:59:35,035 [9200] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:59:35,035 [9200] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001003' order by no
2020-01-16 16:59:35,037 [9200] DEBUG Serviceerp_construction - 获取字段
2020-01-16 16:59:35,037 [9200] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 16:59:35,078 [9200] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:59:35,078 [9200] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 16:59:36,214 [4600] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:59:36,214 [4600] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 16:59:40,273 [4600] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:59:40,283 [4600] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:59:40,283 [4600] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:59:40,289 [4600] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:59:40,290 [4600] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:59:40,744 [9200] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:59:40,744 [9200] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:59:40,748 [9200] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 16:59:43,997 [6032] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 16:59:44,000 [6032] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 16:59:44,001 [6032] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 16:59:44,001 [6032] DEBUG Servicesys_code - 获取动态列表
2020-01-16 16:59:44,001 [6032] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 16:59:44,443 [18004] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 16:59:44,443 [18004] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' order by create_time
2020-01-16 16:59:44,443 [18004] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 where  no =  '201306030001' ) tb_temp
2020-01-16 17:00:12,347 [4600] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 17:00:12,350 [4600] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 17:00:12,350 [4600] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 17:00:12,351 [4600] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:00:12,351 [4600] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 17:00:33,726 [9788] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:00:33,726 [9788] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 order by create_time
2020-01-16 17:00:33,729 [9788] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 ) tb_temp
2020-01-16 17:00:57,881 [4600] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 17:00:57,888 [4600] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 17:00:57,888 [4600] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001002'
2020-01-16 17:01:01,225 [4600] ERROR Serviceerp_construction - 获取实体对象失败
Zephyr.Data.FluentDataException: Could not map: id
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass46_0.<GetModel>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2020-01-16 17:01:43,231 [6440] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 17:01:43,262 [6440] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 17:01:43,268 [6440] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 17:01:43,269 [6440] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 17:01:43,273 [6440] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 17:01:43,273 [6440] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-16 17:01:44,153 [3916] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 17:01:47,731 [3916] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 17:02:03,869 [16192] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 17:02:03,910 [16192] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 17:02:03,921 [16192] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 17:02:03,964 [16192] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:02:03,965 [16192] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 17:02:05,028 [3916] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:02:05,028 [3916] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 order by create_time
2020-01-16 17:02:05,038 [3916] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 ) tb_temp
2020-01-16 17:02:07,845 [16192] DEBUG Serviceerp_construction - 获取新主键
2020-01-16 17:02:07,847 [16192] DEBUG Erp - select top 1 isnull(id,0) from erp_construction order by id desc
2020-01-16 17:02:07,984 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 17:02:07,996 [16808] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 17:02:07,997 [16808] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO202001003'
2020-01-16 17:02:07,999 [16808] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 17:02:08,019 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:08,020 [16808] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 17:02:08,022 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:08,022 [16808] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO202001003' order by no desc
2020-01-16 17:02:08,023 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:08,024 [16808] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO202001003' order by no
2020-01-16 17:02:08,026 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:08,026 [16808] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 17:02:08,055 [16808] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:02:08,055 [16808] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 17:02:09,073 [11496] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:02:09,074 [11496] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 17:02:16,341 [3916] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 17:02:16,364 [3916] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 17:02:16,364 [3916] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO20200100'
2020-01-16 17:02:16,369 [3916] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 17:02:16,370 [3916] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:16,370 [3916] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 17:02:16,370 [3916] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:16,370 [3916] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO20200100' order by no desc
2020-01-16 17:02:16,370 [3916] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:16,370 [3916] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO20200100' order by no
2020-01-16 17:02:16,371 [3916] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:02:16,371 [3916] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 17:02:16,376 [3916] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:02:16,376 [3916] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 17:02:17,065 [9504] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:02:17,065 [9504] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 17:02:32,238 [9504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:02:32,239 [9504] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 17:02:32,251 [9504] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 17:02:36,203 [9504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:02:36,203 [9504] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 17:02:36,204 [9504] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 17:02:44,433 [16808] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:02:44,434 [16808] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 17:02:44,434 [16808] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 17:03:03,885 [16808] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:03:03,909 [16808] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:03:03,915 [16808] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:03:03,936 [16808] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [address] = '535345' where  id =  ''
2020-01-16 17:03:03,952 [16808] DEBUG Erp - insert into  erp_construction([no],[address],[create_username],[create_time]) values('TO20200100','535345','超级管理员','2020-01-16 17:03:03')
2020-01-16 17:03:03,958 [16808] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:03:04,004 [16808] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:03:12,544 [9504] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:03:12,544 [9504] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:03:12,545 [9504] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:03:12,546 [9504] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [address] = '535345' where  id =  ''
2020-01-16 17:03:12,547 [9504] DEBUG Erp - insert into  erp_construction([no],[address],[create_username],[create_time]) values('TO20200100','535345','超级管理员','2020-01-16 17:03:12')
2020-01-16 17:03:12,549 [9504] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:03:12,568 [9504] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:03:17,879 [16808] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:03:17,879 [16808] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 17:03:17,880 [16808] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 17:03:18,875 [9504] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:03:18,875 [9504] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 17:03:20,274 [3916] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:03:20,274 [3916] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:03:20,275 [3916] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:03:20,276 [3916] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [address] = '535345' where  id =  ''
2020-01-16 17:03:20,281 [3916] DEBUG Erp - insert into  erp_construction([no],[product_id],[address],[create_username],[create_time]) values('TO20200100','1','535345','超级管理员','2020-01-16 17:03:20')
2020-01-16 17:03:20,285 [3916] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'customer_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:03:20,304 [3916] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'customer_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:03:30,875 [16808] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:03:30,876 [16808] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') order by id
2020-01-16 17:03:30,877 [16808] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') ) tb_temp
2020-01-16 17:03:38,228 [2284] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2020-01-16 17:03:39,193 [3916] DEBUG Servicemms_merchantsType - 获取动态列表
2020-01-16 17:03:39,194 [3916] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2020-01-16 17:03:39,350 [11496] DEBUG Servicemms_merchants - 获取实体列表
2020-01-16 17:03:39,353 [11496] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2020-01-16 17:03:39,378 [11496] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2020-01-16 17:03:40,189 [9504] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-16 17:03:41,207 [2284] DEBUG Servicesys_menu - 获取动态列表
2020-01-16 17:03:41,208 [2284] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-16 17:04:27,181 [2284] DEBUG Servicesys_menu - 编辑记录
2020-01-16 17:04:27,188 [2284] DEBUG Servicesys_menu - 获取动态对象
2020-01-16 17:04:27,204 [2284] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  'a7e29af5-383f-4bd7-bb01-e23f0be44038'
2020-01-16 17:04:27,212 [2284] DEBUG Sys - insert into 
        sys_menu
    ([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('客户维护','11002','11000','icon-cd_stop','/erp/customer','true','true','','超级管理员','2020-01-16 17:04:27','超级管理员','2020-01-16 17:04:27')
2020-01-16 17:04:27,232 [2284] DEBUG Servicesys_menu - 获取动态对象
2020-01-16 17:04:27,232 [2284] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9902'
2020-01-16 17:04:27,235 [2284] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '菜单导航', [MenuCode] = '9902', [ParentCode] = '99', [IconClass] = 'icon-chart_organisation', [URL] = '/sys/menu', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '210', [UpdatePerson] = '超级管理员', [UpdateDate] = '2020-01-16 17:04:27' where  MenuCode =  '9902'
2020-01-16 17:04:27,270 [2284] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[{"_id":"a7e29af5-383f-4bd7-bb01-e23f0be44038","MenuName":"客户维护","MenuCode":"11002","ParentCode":"11000","IconClass":"icon-cd_stop","URL":"/erp/customer","IsVisible":"true","IsEnable":"true","MenuSeq":""}],"updated":[{"_id":"9902","MenuName":"菜单导航","MenuCode":"9902","ParentCode":"99","IconClass":"icon-chart_organisation","URL":"/sys/menu","IsVisible":"true","IsEnable":"true","MenuSeq":"210"}],"_changed":true}}','2020-01-16 17:04:27')
2020-01-16 17:04:27,466 [11496] DEBUG Servicesys_menu - 获取动态列表
2020-01-16 17:04:27,467 [11496] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-16 17:04:35,333 [3916] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-16 17:04:35,838 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-16 17:04:35,842 [16808] DEBUG Servicesys_user - 获取动态列表
2020-01-16 17:04:35,843 [16808] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-16 17:04:35,844 [16808] DEBUG Servicesys_organize - 获取动态列表
2020-01-16 17:04:35,844 [16808] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-16 17:04:36,213 [2284] DEBUG Servicesys_organize - 获取实体列表
2020-01-16 17:04:36,213 [2284] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-16 17:04:36,227 [3916] DEBUG Servicesys_user - 获取实体列表
2020-01-16 17:04:36,227 [3916] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-16 17:04:36,236 [3916] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-16 17:04:36,548 [2284] DEBUG Servicesys_role - 获取实体列表
2020-01-16 17:04:36,549 [2284] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-16 17:04:37,905 [16808] DEBUG Sys - select * from sys_button order by ButtonSeq
2020-01-16 17:04:37,910 [16808] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2020-01-16 17:04:37,965 [11496] DEBUG Servicesys_permission - 获取动态列表
2020-01-16 17:04:37,966 [11496] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2020-01-16 17:04:37,985 [16808] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2020-01-16 17:04:44,446 [2284] DEBUG Servicesys_role - 修改角色菜单权限
2020-01-16 17:04:44,450 [2284] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2020-01-16 17:04:44,451 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10000')
2020-01-16 17:04:44,452 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10001')
2020-01-16 17:04:44,452 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1000101')
2020-01-16 17:04:44,453 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2020-01-16 17:04:44,453 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2020-01-16 17:04:44,454 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2020-01-16 17:04:44,454 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2020-01-16 17:04:44,455 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2020-01-16 17:04:44,455 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2020-01-16 17:04:44,456 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2020-01-16 17:04:44,456 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2020-01-16 17:04:44,458 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2020-01-16 17:04:44,460 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2020-01-16 17:04:44,460 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2020-01-16 17:04:44,461 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2020-01-16 17:04:44,461 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2020-01-16 17:04:44,462 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2020-01-16 17:04:44,462 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2020-01-16 17:04:44,463 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2020-01-16 17:04:44,463 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2020-01-16 17:04:44,464 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2020-01-16 17:04:44,464 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2020-01-16 17:04:44,464 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2020-01-16 17:04:44,465 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2020-01-16 17:04:44,465 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2020-01-16 17:04:44,466 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2020-01-16 17:04:44,466 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2020-01-16 17:04:44,467 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2020-01-16 17:04:44,467 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2020-01-16 17:04:44,468 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2020-01-16 17:04:44,468 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2020-01-16 17:04:44,469 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2020-01-16 17:04:44,470 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2020-01-16 17:04:44,470 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2020-01-16 17:04:44,471 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2020-01-16 17:04:44,471 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2020-01-16 17:04:44,472 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2020-01-16 17:04:44,473 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2020-01-16 17:04:44,474 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2020-01-16 17:04:44,475 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2020-01-16 17:04:44,476 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2020-01-16 17:04:44,476 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2020-01-16 17:04:44,477 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2020-01-16 17:04:44,477 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2020-01-16 17:04:44,478 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2020-01-16 17:04:44,478 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2020-01-16 17:04:44,479 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2020-01-16 17:04:44,480 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2020-01-16 17:04:44,480 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2020-01-16 17:04:44,481 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11000')
2020-01-16 17:04:44,481 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11002')
2020-01-16 17:04:44,482 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11001')
2020-01-16 17:04:44,482 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2020-01-16 17:04:44,483 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2020-01-16 17:04:44,483 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2020-01-16 17:04:44,484 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2020-01-16 17:04:44,485 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2020-01-16 17:04:44,485 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2020-01-16 17:04:44,486 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2020-01-16 17:04:44,486 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2020-01-16 17:04:44,487 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2020-01-16 17:04:44,487 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2020-01-16 17:04:44,488 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2020-01-16 17:04:44,488 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2020-01-16 17:04:44,489 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2020-01-16 17:04:44,489 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2020-01-16 17:04:44,490 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2020-01-16 17:04:44,490 [2284] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2020-01-16 17:04:44,496 [2284] DEBUG Servicesys_role - 修改角色菜单按钮权限
2020-01-16 17:04:44,499 [2284] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2020-01-16 17:04:44,500 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2020-01-16 17:04:44,501 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2020-01-16 17:04:44,501 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2020-01-16 17:04:44,502 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2020-01-16 17:04:44,503 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2020-01-16 17:04:44,503 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2020-01-16 17:04:44,504 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2020-01-16 17:04:44,505 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2020-01-16 17:04:44,506 [2284] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2020-01-16 17:04:44,510 [2284] DEBUG Servicesys_role - 修改角色数据权限
2020-01-16 17:04:44,513 [2284] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2020-01-16 17:04:44,514 [2284] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2020-01-16 17:04:44,519 [2284] DEBUG Servicesys_role - 修改角色数据列权限
2020-01-16 17:04:44,524 [2284] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2020-01-16 17:04:44,535 [2284] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2020-01-16 17:04:46,404 [13548] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 17:04:46,757 [16808] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 17:04:47,253 [11496] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-16 17:04:47,263 [11496] DEBUG Servicesys_user - 获取动态列表
2020-01-16 17:04:47,263 [11496] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-16 17:04:47,264 [11496] DEBUG Servicesys_organize - 获取动态列表
2020-01-16 17:04:47,264 [11496] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-16 17:04:47,686 [13548] DEBUG Servicesys_role - 获取实体列表
2020-01-16 17:04:47,686 [13548] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-16 17:04:50,870 [3916] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-16 17:04:51,058 [11496] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-16 17:04:53,704 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 17:04:53,720 [16808] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 17:04:53,721 [16808] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 17:04:53,722 [16808] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:04:53,722 [16808] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 17:04:54,384 [12568] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:04:54,386 [12568] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 order by create_time
2020-01-16 17:04:54,390 [12568] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 ) tb_temp
2020-01-16 17:04:56,235 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 17:04:56,249 [16808] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 17:04:56,249 [16808] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO20200100'
2020-01-16 17:04:56,254 [16808] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 17:04:56,254 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:04:56,254 [16808] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 17:04:56,262 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:04:56,262 [16808] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO20200100' order by no desc
2020-01-16 17:04:56,262 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:04:56,262 [16808] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO20200100' order by no
2020-01-16 17:04:56,263 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:04:56,263 [16808] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 17:04:56,263 [16808] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:04:56,263 [16808] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 17:04:57,797 [12568] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:04:57,797 [12568] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 17:05:00,173 [12568] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:05:00,173 [12568] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') order by id
2020-01-16 17:05:00,174 [12568] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') ) tb_temp
2020-01-16 17:05:09,499 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/customer/Index','/Erp/customer')
2020-01-16 17:05:09,518 [16808] DEBUG Servicebase_data - 获取动态列表
2020-01-16 17:05:09,521 [16808] DEBUG Erp - select name as value,name as text from base_data where  type =  '客户等级'and isenable =  '1'
2020-01-16 17:05:10,750 [12568] DEBUG Servicebase_customer - 获取动态列表
2020-01-16 17:05:10,750 [12568] DEBUG Erp - select top 20 * from base_customer order by id
2020-01-16 17:05:10,762 [12568] DEBUG Erp - select count(*) from ( select * from base_customer ) tb_temp
2020-01-16 17:05:11,662 [12568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/customer/Index','/Erp/customer')
2020-01-16 17:05:11,664 [12568] DEBUG Servicebase_data - 获取动态列表
2020-01-16 17:05:11,664 [12568] DEBUG Erp - select name as value,name as text from base_data where  type =  '客户等级'and isenable =  '1'
2020-01-16 17:05:12,050 [16756] DEBUG Servicebase_customer - 获取动态列表
2020-01-16 17:05:12,050 [16756] DEBUG Erp - select top 20 * from base_customer order by id
2020-01-16 17:05:12,051 [16756] DEBUG Erp - select count(*) from ( select * from base_customer ) tb_temp
2020-01-16 17:05:50,212 [13548] DEBUG Servicebase_customer - 编辑记录
2020-01-16 17:05:50,212 [13548] DEBUG Servicebase_customer - 获取动态对象
2020-01-16 17:05:50,213 [13548] DEBUG Erp - select base_customer.* from base_customer where  id =  ''
2020-01-16 17:05:50,217 [13548] DEBUG Erp - insert into base_customer([jc_name],[name],[contacts],[contacts_phone],[email],[grade],[address],[isenable],[remark],[create_username],[create_time]) values('上海滴滴','上海滴滴XXX','张三','13232','11','2','22','true','3','超级管理员','2020-01-16 17:05:50')
2020-01-16 17:05:55,087 [3916] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:05:55,092 [3916] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') order by id
2020-01-16 17:05:55,093 [3916] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') ) tb_temp
2020-01-16 17:05:56,460 [16756] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:05:56,461 [16756] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_customer
   where  id in ('1') order by id
2020-01-16 17:06:05,565 [2284] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:06:05,565 [2284] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:06:05,566 [2284] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:06:05,567 [2284] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [customer_id] = '1' where  id =  ''
2020-01-16 17:06:05,580 [2284] DEBUG Erp - insert into  erp_construction([no],[customer_id],[create_username],[create_time]) values('TO20200100','1','超级管理员','2020-01-16 17:06:05')
2020-01-16 17:06:05,586 [2284] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:05,593 [2284] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:10,847 [13548] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:06:10,847 [13548] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 17:06:10,850 [13548] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 17:06:11,830 [16756] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:06:11,831 [16756] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 17:06:13,198 [16808] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:06:13,199 [16808] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:06:13,199 [16808] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:06:13,201 [16808] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1' where  id =  ''
2020-01-16 17:06:13,206 [16808] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[create_username],[create_time]) values('TO20200100','1','1','超级管理员','2020-01-16 17:06:13')
2020-01-16 17:06:13,209 [16808] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'number'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:13,216 [16808] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'number'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:22,580 [2284] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:06:22,581 [2284] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:06:22,582 [2284] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:06:22,584 [2284] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1', [number] = '2222' where  id =  ''
2020-01-16 17:06:22,600 [2284] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[create_username],[create_time]) values('TO20200100','1','1','2222','超级管理员','2020-01-16 17:06:22')
2020-01-16 17:06:22,607 [2284] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'guige'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:22,623 [2284] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'guige'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:30,657 [12568] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:06:30,658 [12568] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:06:30,665 [12568] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:06:30,672 [12568] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1', [number] = '2222', [guige] = '3333' where  id =  ''
2020-01-16 17:06:30,681 [12568] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[create_username],[create_time]) values('TO20200100','1','1','2222','3333','超级管理员','2020-01-16 17:06:30')
2020-01-16 17:06:30,684 [12568] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'zhuangdinfa'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:30,691 [12568] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'zhuangdinfa'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:48,834 [11496] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:06:48,834 [11496] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:06:48,835 [11496] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:06:48,836 [11496] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1', [number] = '2222', [guige] = '3333' where  id =  ''
2020-01-16 17:06:48,836 [11496] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[create_username],[create_time]) values('TO20200100','1','1','2222','3333','超级管理员','2020-01-16 17:06:48')
2020-01-16 17:06:48,838 [11496] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'zhuangdinfa'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:48,869 [11496] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'zhuangdinfa'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:56,604 [13548] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:06:56,605 [13548] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:06:56,615 [13548] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:06:56,616 [13548] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1', [number] = '2222', [guige] = '3333', [zhuangdinfa] = '333', [baozhuangfa] = '4', [delivery_date] = '2020-01-16', [source_no] = '43' where  id =  ''
2020-01-16 17:06:56,623 [13548] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[delivery_date],[source_no],[create_username],[create_time]) values('TO20200100','1','1','2222','3333','333','4','2020-01-16','43','超级管理员','2020-01-16 17:06:56')
2020-01-16 17:06:56,626 [13548] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'address'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:06:56,639 [13548] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'address'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:07:00,570 [13548] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:07:00,571 [13548] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:07:00,571 [13548] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:07:00,572 [13548] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1', [number] = '2222', [guige] = '3333', [zhuangdinfa] = '333', [baozhuangfa] = '4', [address] = '11111', [delivery_date] = '2020-01-16', [source_no] = '43' where  id =  ''
2020-01-16 17:07:00,579 [13548] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[number],[guige],[zhuangdinfa],[baozhuangfa],[address],[delivery_date],[source_no],[create_username],[create_time]) values('TO20200100','1','1','2222','3333','333','4','11111','2020-01-16','43','超级管理员','2020-01-16 17:07:00')
2020-01-16 17:07:00,583 [13548] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'state'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:07:00,590 [13548] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'state'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:fd70941d-c573-435a-9605-41e671bd1e55
Error Number:515,State:2,Class:16
2020-01-16 17:07:39,066 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/Index','/Erp/ErpConstruction')
2020-01-16 17:07:39,070 [16808] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-16 17:07:39,070 [16808] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-16 17:07:39,070 [16808] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:07:39,071 [16808] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-16 17:07:39,827 [16756] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:07:39,827 [16756] DEBUG Erp - select top 20 *
                 from 
                    Erp_Construction
                 order by create_time
2020-01-16 17:07:39,828 [16756] DEBUG Erp - select count(*) from ( select *
                 from 
                    Erp_Construction
                 ) tb_temp
2020-01-16 17:07:42,770 [16808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/ErpConstruction/edit')
2020-01-16 17:07:42,773 [16808] DEBUG Serviceerp_construction - 获取实体对象
2020-01-16 17:07:42,773 [16808] DEBUG Erp - select erp_construction.* from erp_construction where  no =  'TO20200100'
2020-01-16 17:07:42,775 [16808] DEBUG Serviceerp_construction - 获取上一条下一条数据
2020-01-16 17:07:42,775 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:07:42,775 [16808] DEBUG Erp - select top 1 no from erp_construction order by no
2020-01-16 17:07:42,777 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:07:42,778 [16808] DEBUG Erp - select top 1 no from erp_construction where  no < 'TO20200100' order by no desc
2020-01-16 17:07:42,778 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:07:42,779 [16808] DEBUG Erp - select top 1 no from erp_construction where  no >  'TO20200100' order by no
2020-01-16 17:07:42,779 [16808] DEBUG Serviceerp_construction - 获取字段
2020-01-16 17:07:42,779 [16808] DEBUG Erp - select top 1 no from erp_construction order by no desc
2020-01-16 17:07:42,780 [16808] DEBUG Servicesys_code - 获取动态列表
2020-01-16 17:07:42,780 [16808] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-16 17:07:44,219 [4060] DEBUG Serviceerp_construction - 获取动态列表
2020-01-16 17:07:44,219 [4060] DEBUG Erp - select 
                        *
                     from 
                        erp_parts
                     where  con_no =  '' order by id
2020-01-16 17:07:52,595 [12568] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:07:52,595 [12568] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') order by id
2020-01-16 17:07:52,596 [12568] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_customer
   where  isenable in ('1') ) tb_temp
2020-01-16 17:07:53,505 [16808] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:07:53,506 [16808] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_customer
   where  id in ('1') order by id
2020-01-16 17:07:54,807 [15228] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:07:54,808 [15228] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:07:54,808 [15228] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:07:54,810 [15228] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [customer_id] = '1' where  id =  ''
2020-01-16 17:07:54,810 [15228] DEBUG Erp - insert into  erp_construction([no],[customer_id],[create_username],[create_time]) values('TO20200100','1','超级管理员','2020-01-16 17:07:54')
2020-01-16 17:07:54,812 [15228] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:07:54,848 [15228] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'product_id'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:07:59,104 [11496] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:07:59,105 [11496] DEBUG Erp - select top 20 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') order by id
2020-01-16 17:07:59,110 [11496] DEBUG Erp - select count(*) from ( select 
    id   as   value,name   as   text
   from 
    base_product
   where  isenable in ('1') ) tb_temp
2020-01-16 17:08:00,360 [1704] DEBUG ServiceModelBase - 获取动态列表
2020-01-16 17:08:00,360 [1704] DEBUG Erp - select 
    id   as   value,name   as   text
   from 
    base_product
   where  id in ('1') order by id
2020-01-16 17:08:01,643 [13548] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:08:01,644 [13548] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:08:01,644 [13548] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:08:01,645 [13548] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1' where  id =  ''
2020-01-16 17:08:01,646 [13548] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[create_username],[create_time]) values('TO20200100','1','1','超级管理员','2020-01-16 17:08:01')
2020-01-16 17:08:01,656 [13548] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'number'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:08:01,673 [13548] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'number'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:10:42,887 [3916] DEBUG Serviceerp_construction - 编辑记录
2020-01-16 17:10:42,888 [3916] DEBUG Serviceerp_construction - 获取动态对象
2020-01-16 17:10:42,890 [3916] DEBUG Erp - select  erp_construction.* from  erp_construction where  id =  ''
2020-01-16 17:10:42,891 [3916] DEBUG Erp - update  erp_construction set [no] = 'TO20200100', [product_id] = '1', [customer_id] = '1' where  id =  ''
2020-01-16 17:10:42,892 [3916] DEBUG Erp - insert into  erp_construction([no],[product_id],[customer_id],[create_username],[create_time]) values('TO20200100','1','1','超级管理员','2020-01-16 17:10:42')
2020-01-16 17:10:42,893 [3916] ERROR Serviceerp_construction - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'number'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 D:\Project\Code\WEBERP\Code\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass34_0.<Edit>b__0() 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
2020-01-16 17:10:42,908 [3916] ERROR /api/erp/ErpConstruction/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'number'，表 'Zephyr.Erp.dbo.erp_construction'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 E:\code\Github\Project\WEBERP\Code\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , erp_constructionService , RequestWrapper , Object , Object )
   在 ERP.Web.Areas.Erp.Controllers.ErpBaseApi`4.Edit(Object data) 位置 E:\code\Github\Project\WEBERP\Code\ERP.Web\Areas\Erp\Common\ErpBaseApi.cs:行号 158
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:31d1520c-e9b7-4cef-b8e8-ed8ff87e87d1
Error Number:515,State:2,Class:16
