2020-01-07 20:06:59,825 [8936] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:06:59,869 [8936] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:06:59,874 [8936] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:06:59,882 [8936] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:06:59,885 [8936] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:06:59,892 [8936] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:07:26,767 [1160] DEBUG Servicesys_user - 获取实体对象
2020-01-07 20:07:26,767 [1160] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2020-01-07 20:07:26,845 [1160] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2020-01-07 20:07:26,908 [1160] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','4S6DBKLDWJUEQVW','localhost','上海市','2020/1/7 20:07:26')
2020-01-07 20:07:26,908 [1160] DEBUG Servicemms_project - 获取实体对象
2020-01-07 20:07:26,908 [1160] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2020-01-07 20:07:26,939 [2344] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:07:28,032 [7696] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:33:27,120 [9104] DEBUG Servicesys_user - 获取实体对象
2020-01-07 20:33:27,135 [9104] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'super'and Password =  '1234'and IsEnable =  'True'
2020-01-07 20:33:27,137 [9104] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'super' 
2020-01-07 20:33:27,142 [9104] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('super','超级管理员','4S6DBKLDWJUEQVW','localhost','上海市','2020/1/7 20:33:27')
2020-01-07 20:33:27,144 [9104] DEBUG Servicemms_project - 获取实体对象
2020-01-07 20:33:27,154 [9104] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2020-01-07 20:33:27,195 [5548] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:33:27,858 [7828] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:33:32,354 [7380] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 20:33:32,395 [7380] DEBUG Servicebase_data - 获取动态列表
2020-01-07 20:33:32,420 [7380] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 20:33:33,393 [6148] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 20:33:33,394 [6148] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 20:33:33,427 [6148] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 20:34:07,531 [9104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2020-01-07 20:34:07,556 [9104] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:34:07,557 [9104] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:34:07,585 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:07,586 [9104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-07 20:34:10,560 [5716] DEBUG Servicemms_receive - 获取动态列表
2020-01-07 20:34:10,560 [5716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-07 20:34:10,599 [5716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-07 20:34:11,651 [7440] DEBUG Servicemms_receive - 获取新主键
2020-01-07 20:34:11,655 [7440] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2020-01-07 20:34:11,854 [7612] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/edit')
2020-01-07 20:34:11,877 [7612] DEBUG Servicemms_receive - 获取实体对象
2020-01-07 20:34:11,878 [7612] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '202001070001'
2020-01-07 20:34:11,886 [7612] DEBUG Servicemms_receive - 获取上一条下一条数据
2020-01-07 20:34:11,930 [7612] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:11,932 [7612] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:34:11,938 [7612] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:11,938 [7612] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '202001070001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:34:11,944 [7612] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:11,945 [7612] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '202001070001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:34:11,950 [7612] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:11,950 [7612] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:34:12,014 [7612] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:12,015 [7612] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-07 20:34:12,018 [7612] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:12,019 [7612] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-07 20:34:12,020 [7612] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:12,020 [7612] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-07 20:34:12,021 [7612] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:34:12,021 [7612] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:34:12,024 [7612] DEBUG Servicesys_code - 获取字段
2020-01-07 20:34:12,024 [7612] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'SupplyType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:34:12,029 [7612] DEBUG Servicesys_code - 获取字段
2020-01-07 20:34:12,029 [7612] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:34:15,073 [6148] DEBUG Servicemms_receive - 获取动态列表
2020-01-07 20:34:15,074 [6148] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '202001070001' order by A.MaterialCode
2020-01-07 20:34:19,411 [5716] DEBUG Servicemms_materialType - 获取动态列表
2020-01-07 20:34:19,412 [5716] DEBUG Mms - select 
        MaterialTypeName as text,MaterialType as id,ParentCode as pid
     from 
        mms_materialType
     order by MaterialType
2020-01-07 20:34:19,476 [7440] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:34:19,477 [7440] DEBUG Mms - select top 10 A.* from 
    mms_material A
   order by A.MaterialCode
2020-01-07 20:34:19,495 [7440] DEBUG Mms - select count(*) from ( select A.* from 
    mms_material A
   ) tb_temp
2020-01-07 20:34:21,789 [6576] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:34:21,789 [6576] DEBUG Mms - select top 10 A.* from 
    mms_material A
   where  MaterialType like '01010103%' order by A.MaterialCode
2020-01-07 20:34:21,795 [6576] DEBUG Mms - select count(*) from ( select A.* from 
    mms_material A
   where  MaterialType like '01010103%' ) tb_temp
2020-01-07 20:34:21,991 [9104] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:34:21,991 [9104] DEBUG Mms - select top 10 A.* from 
    mms_material A
   where  MaterialType like '01010103%' order by A.MaterialCode
2020-01-07 20:34:21,993 [9104] DEBUG Mms - select count(*) from ( select A.* from 
    mms_material A
   where  MaterialType like '01010103%' ) tb_temp
2020-01-07 20:34:27,959 [7380] DEBUG Servicemms_receiveDetail - 获取新主键
2020-01-07 20:34:27,960 [7380] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and  BillNo =  '202001070001'
2020-01-07 20:34:27,966 [7380] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and  BillNo =  '202001070001'
2020-01-07 20:34:27,967 [7380] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and  BillNo =  '202001070001'
2020-01-07 20:34:56,895 [9104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/edit')
2020-01-07 20:34:56,901 [9104] DEBUG Servicemms_receive - 获取实体对象
2020-01-07 20:34:56,901 [9104] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201306270001'
2020-01-07 20:34:56,929 [9104] DEBUG Servicemms_receive - 获取上一条下一条数据
2020-01-07 20:34:56,929 [9104] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:56,929 [9104] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:34:56,930 [9104] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:56,930 [9104] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201306270001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:34:56,934 [9104] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:56,934 [9104] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201306270001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:34:56,938 [9104] DEBUG Servicemms_receive - 获取字段
2020-01-07 20:34:56,938 [9104] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:34:56,950 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:56,951 [9104] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-07 20:34:56,952 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:56,952 [9104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-07 20:34:56,953 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:34:56,954 [9104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-07 20:34:56,955 [9104] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:34:56,955 [9104] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:34:56,956 [9104] DEBUG Servicesys_code - 获取字段
2020-01-07 20:34:56,956 [9104] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'SupplyType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:34:56,957 [9104] DEBUG Servicesys_code - 获取字段
2020-01-07 20:34:56,957 [9104] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:34:58,458 [1212] DEBUG ServiceModelBase - 获取动态列表
2020-01-07 20:34:58,459 [1212] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('DL0012') order by MerchantsCode
2020-01-07 20:34:59,040 [7380] DEBUG Servicemms_receive - 获取动态列表
2020-01-07 20:34:59,041 [7380] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201306270001' order by A.MaterialCode
2020-01-07 20:35:16,657 [5548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2020-01-07 20:35:16,661 [5548] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:35:16,662 [5548] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:35:16,663 [5548] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:16,663 [5548] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-07 20:35:17,110 [6576] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/Index','/Mms/send')
2020-01-07 20:35:17,130 [6576] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:35:17,130 [6576] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:35:17,140 [6576] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:17,141 [6576] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:35:17,142 [6576] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:17,142 [6576] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2020-01-07 20:35:17,816 [5716] DEBUG Servicemms_receive - 获取动态列表
2020-01-07 20:35:17,816 [5716] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-07 20:35:17,821 [5716] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-07 20:35:18,634 [6576] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2020-01-07 20:35:18,638 [6576] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
2020-01-07 20:35:18,695 [6576] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2020-01-07 20:35:18,697 [6576] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'super'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'super'
)
order by ButtonSeq
2020-01-07 20:35:19,789 [8952] DEBUG Servicemms_send - 获取动态列表
2020-01-07 20:35:19,790 [8952] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-07 20:35:19,828 [8952] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-07 20:35:21,372 [7380] DEBUG Servicemms_send - 获取新主键
2020-01-07 20:35:21,373 [7380] DEBUG Mms - select isnull(max(BillNo),0) from mms_send
2020-01-07 20:35:21,545 [9104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/send/edit')
2020-01-07 20:35:21,566 [9104] DEBUG Servicemms_send - 获取实体对象
2020-01-07 20:35:21,566 [9104] DEBUG Mms - select mms_send.* from mms_send where  BillNo =  '202001070001'
2020-01-07 20:35:21,570 [9104] DEBUG Servicemms_send - 获取上一条下一条数据
2020-01-07 20:35:21,574 [9104] DEBUG Servicemms_send - 获取字段
2020-01-07 20:35:21,574 [9104] DEBUG Mms - select top 1 BillNo from mms_send where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:35:21,579 [9104] DEBUG Servicemms_send - 获取字段
2020-01-07 20:35:21,579 [9104] DEBUG Mms - select top 1 BillNo from mms_send where  BillNo < '202001070001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:35:21,585 [9104] DEBUG Servicemms_send - 获取字段
2020-01-07 20:35:21,585 [9104] DEBUG Mms - select top 1 BillNo from mms_send where  BillNo >  '202001070001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:35:21,591 [9104] DEBUG Servicemms_send - 获取字段
2020-01-07 20:35:21,591 [9104] DEBUG Mms - select top 1 BillNo from mms_send where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:35:21,645 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:21,645 [9104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:35:21,647 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:21,647 [9104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2020-01-07 20:35:21,648 [9104] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:21,648 [9104] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-07 20:35:21,649 [9104] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:35:21,649 [9104] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:35:21,651 [9104] DEBUG Servicesys_code - 获取字段
2020-01-07 20:35:21,651 [9104] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:35:24,353 [4308] DEBUG Servicemms_send - 获取动态列表
2020-01-07 20:35:24,353 [4308] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_sendDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '202001070001' order by A.MaterialCode
2020-01-07 20:35:47,757 [7348] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/return/Index','/Mms/return')
2020-01-07 20:35:47,777 [7348] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:35:47,777 [7348] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:35:47,779 [7348] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:47,779 [7348] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:35:47,780 [7348] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:47,780 [7348] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-07 20:35:50,560 [9104] DEBUG Servicemms_return - 获取动态列表
2020-01-07 20:35:50,561 [9104] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName
     from 
        mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-07 20:35:50,597 [9104] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName
     from 
        mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-07 20:35:52,384 [5548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/return/edit')
2020-01-07 20:35:52,405 [5548] DEBUG Servicemms_return - 获取实体对象
2020-01-07 20:35:52,406 [5548] DEBUG Mms - select mms_return.* from mms_return where  BillNo =  '201306060001'
2020-01-07 20:35:52,437 [5548] DEBUG Servicemms_return - 获取上一条下一条数据
2020-01-07 20:35:52,440 [5548] DEBUG Servicemms_return - 获取字段
2020-01-07 20:35:52,440 [5548] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:35:52,446 [5548] DEBUG Servicemms_return - 获取字段
2020-01-07 20:35:52,447 [5548] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo < '201306060001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:35:52,452 [5548] DEBUG Servicemms_return - 获取字段
2020-01-07 20:35:52,452 [5548] DEBUG Mms - select top 1 BillNo from mms_return where  BillNo >  '201306060001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:35:52,458 [5548] DEBUG Servicemms_return - 获取字段
2020-01-07 20:35:52,458 [5548] DEBUG Mms - select top 1 BillNo from mms_return where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:35:52,510 [5548] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:52,510 [5548] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-07 20:35:52,511 [5548] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:52,511 [5548] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:35:52,512 [5548] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:35:52,513 [5548] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-07 20:35:52,514 [5548] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:35:52,514 [5548] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:35:52,515 [5548] DEBUG Servicesys_code - 获取字段
2020-01-07 20:35:52,516 [5548] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:35:52,516 [5548] DEBUG Servicesys_code - 获取字段
2020-01-07 20:35:52,517 [5548] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:35:54,216 [4308] DEBUG ServiceModelBase - 获取动态列表
2020-01-07 20:35:54,216 [4308] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00302') order by MerchantsCode
2020-01-07 20:35:55,193 [7440] DEBUG Servicemms_return - 获取动态列表
2020-01-07 20:35:55,194 [7440] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_returnDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201306060001' order by A.MaterialCode
2020-01-07 20:36:15,754 [7380] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/transfer/Index','/Mms/transfer')
2020-01-07 20:36:15,775 [7380] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:36:15,776 [7380] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:36:15,780 [7380] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:36:15,781 [7380] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:36:16,052 [2092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/transfer/Index','/Mms/transfer')
2020-01-07 20:36:16,057 [2092] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:36:16,057 [2092] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:36:16,058 [2092] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:36:16,059 [2092] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:36:18,425 [1212] DEBUG Servicemms_transfer - 获取动态列表
2020-01-07 20:36:18,427 [1212] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName
     from 
        mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2020-01-07 20:36:18,459 [1212] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName
     from 
        mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2020-01-07 20:36:20,495 [6052] DEBUG Servicemms_transfer - 获取新主键
2020-01-07 20:36:20,495 [6052] DEBUG Mms - select isnull(max(BillNo),0) from mms_transfer
2020-01-07 20:36:20,620 [7348] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/transfer/edit')
2020-01-07 20:36:20,640 [7348] DEBUG Servicemms_transfer - 获取实体对象
2020-01-07 20:36:20,641 [7348] DEBUG Mms - select mms_transfer.* from mms_transfer where  BillNo =  '202001070001'
2020-01-07 20:36:20,647 [7348] DEBUG Servicemms_transfer - 获取上一条下一条数据
2020-01-07 20:36:20,650 [7348] DEBUG Servicemms_transfer - 获取字段
2020-01-07 20:36:20,651 [7348] DEBUG Mms - select top 1 BillNo from mms_transfer where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:36:20,661 [7348] DEBUG Servicemms_transfer - 获取字段
2020-01-07 20:36:20,661 [7348] DEBUG Mms - select top 1 BillNo from mms_transfer where  BillNo < '202001070001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:36:20,667 [7348] DEBUG Servicemms_transfer - 获取字段
2020-01-07 20:36:20,667 [7348] DEBUG Mms - select top 1 BillNo from mms_transfer where  BillNo >  '202001070001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:36:20,685 [7348] DEBUG Servicemms_transfer - 获取字段
2020-01-07 20:36:20,685 [7348] DEBUG Mms - select top 1 BillNo from mms_transfer where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:36:20,742 [7348] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:36:20,743 [7348] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-07 20:36:20,744 [7348] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:36:20,744 [7348] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2020-01-07 20:36:20,745 [7348] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:36:20,746 [7348] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2020-01-07 20:36:20,746 [7348] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:36:20,747 [7348] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2020-01-07 20:36:20,748 [7348] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:36:20,748 [7348] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:36:20,750 [7348] DEBUG Servicesys_code - 获取字段
2020-01-07 20:36:20,750 [7348] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'Pricing'and IsEnable =  'True'and IsDefault =  'True'
2020-01-07 20:36:23,124 [4308] DEBUG Servicemms_transferDetail - 获取动态列表
2020-01-07 20:36:23,124 [4308] DEBUG Mms - select 
        A.*, C.MaterialName,C.Model,C.Material,D.Num as StockNum,D.UnitPrice as StockUnitPrice,T.RemainNum,T.SrcUnitPrice
     from 
        mms_transferDetail A
        left join mms_transfer B on B.BillNo = A.BillNo
        left join mms_material C on C.MaterialCode = A.MaterialCode
        left join mms_warehouseStock D on D.WarehouseCode = B.WarehouseCode and D.MaterialCode = A.MaterialCode
        left join ( 
    select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
 ) T on T.SrcBillType=A.SrcBillType and T.SrcBillNo=A.SrcBillNo and T.SrcRowId = A.SrcRowId
     where  A.BillNo =  '202001070001' order by A.RowId
2020-01-07 20:36:26,210 [5548] DEBUG Servicemms_materialType - 获取动态列表
2020-01-07 20:36:26,210 [5548] DEBUG Mms - select 
        MaterialTypeName as text,MaterialType as id,ParentCode as pid
     from 
        mms_materialType
     order by MaterialType
2020-01-07 20:36:26,286 [1212] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:26,286 [1212] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:26,357 [1212] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:28,310 [7348] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:28,310 [7348] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010102%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:28,411 [7348] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010102%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:28,514 [8952] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:28,514 [8952] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010102%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:28,515 [8952] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010102%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:33,538 [7440] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:33,539 [7440] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010103%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:33,639 [7440] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010103%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:33,781 [6052] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:33,781 [6052] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010103%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:33,782 [6052] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010103%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:34,963 [9104] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:34,963 [9104] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010101%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:35,064 [9104] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01010101%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:35,583 [8952] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:35,583 [8952] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '0002%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:35,685 [8952] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '0002%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:36,641 [7380] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:36,641 [7380] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '00%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:36,739 [7380] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '00%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:38,478 [6052] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:38,478 [6052] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:38,571 [6052] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:39,761 [9104] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:39,761 [9104] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '010301%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:39,865 [9104] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '010301%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:40,413 [4308] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:40,413 [4308] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '0103%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:40,516 [4308] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '0103%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:40,876 [7440] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:40,877 [7440] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01030102%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:40,979 [7440] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01030102%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:42,204 [2092] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:42,204 [2092] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070203%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:42,302 [2092] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070203%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:42,668 [6052] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:42,668 [6052] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070106%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:42,772 [6052] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070106%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:43,012 [4308] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:43,013 [4308] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070102%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:43,113 [4308] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070102%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:52,182 [6052] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:52,183 [6052] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070102%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:52,205 [6052] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070102%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:53,369 [4308] DEBUG Servicemms_material - 获取动态列表
2020-01-07 20:36:53,370 [4308] DEBUG Mms - select top 10 * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070102%'and WarehouseCode =  '' order by MaterialCode
2020-01-07 20:36:53,371 [4308] DEBUG Mms - select count(*) from ( select * from 
    (select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
    where A.RemainNum>0) T
   where  MaterialType like '01070102%'and WarehouseCode =  '' ) tb_temp
2020-01-07 20:36:56,347 [8952] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2020-01-07 20:36:56,365 [8952] DEBUG Servicemms_warehouse - 获取动态列表
2020-01-07 20:36:56,365 [8952] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2020-01-07 20:36:58,871 [9104] DEBUG Servicemms_rentOut - 获取动态列表
2020-01-07 20:36:58,872 [9104] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MerchantsName
     from 
        mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode
     where  isnull(IsTotal,0)<>1 order by A.BillNo
2020-01-07 20:36:58,902 [9104] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MerchantsName
     from 
        mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode
     where  isnull(IsTotal,0)<>1 ) tb_temp
2020-01-07 20:37:02,867 [5716] DEBUG Servicemms_rentOut - 获取新主键
2020-01-07 20:37:02,868 [5716] DEBUG Mms - select isnull(max(BillNo),0) from mms_rentOut
2020-01-07 20:37:12,470 [2092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/rentout/edit')
2020-01-07 20:37:12,491 [2092] DEBUG Servicemms_rentOut - 获取实体对象
2020-01-07 20:37:12,491 [2092] DEBUG Mms - select mms_rentOut.* from mms_rentOut where  BillNo =  '201306140001'
2020-01-07 20:37:12,509 [2092] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2020-01-07 20:37:12,513 [2092] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:12,513 [2092] DEBUG Mms - select top 1 BillNo from mms_rentOut where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:37:12,522 [2092] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:12,523 [2092] DEBUG Mms - select top 1 BillNo from mms_rentOut where  BillNo < '201306140001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:37:12,529 [2092] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:12,529 [2092] DEBUG Mms - select top 1 BillNo from mms_rentOut where  BillNo >  '201306140001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:37:12,535 [2092] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:12,535 [2092] DEBUG Mms - select top 1 BillNo from mms_rentOut where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:37:12,586 [2092] DEBUG Servicesys_code - 获取动态列表
2020-01-07 20:37:12,587 [2092] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2020-01-07 20:37:14,012 [9104] DEBUG ServiceModelBase - 获取动态列表
2020-01-07 20:37:14,012 [9104] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00302') order by MerchantsCode
2020-01-07 20:37:14,677 [4308] DEBUG Servicemms_rentOut - 获取动态列表
2020-01-07 20:37:14,678 [4308] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo
     from 
        mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId
     where  A.BillNo =  '201306140001' order by A.MaterialCode
2020-01-07 20:37:23,240 [6052] DEBUG Servicemms_rentOut - 获取实体对象
2020-01-07 20:37:23,240 [6052] DEBUG Mms - select mms_rentOut.* from mms_rentOut where  BillNo =  '201306140003'
2020-01-07 20:37:23,251 [6052] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2020-01-07 20:37:23,252 [6052] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:23,252 [6052] DEBUG Mms - select top 1 BillNo from mms_rentOut where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:37:23,256 [6052] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:23,256 [6052] DEBUG Mms - select top 1 BillNo from mms_rentOut where  BillNo < '201306140003'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:37:23,259 [6052] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:23,259 [6052] DEBUG Mms - select top 1 BillNo from mms_rentOut where  BillNo >  '201306140003'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:37:23,263 [6052] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:23,264 [6052] DEBUG Mms - select top 1 BillNo from mms_rentOut where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:37:23,609 [7440] DEBUG Servicemms_rentOut - 获取动态列表
2020-01-07 20:37:23,609 [7440] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo
     from 
        mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId
     where  A.BillNo =  '201306140003' order by A.MaterialCode
2020-01-07 20:37:23,738 [4308] DEBUG ServiceModelBase - 获取动态列表
2020-01-07 20:37:23,739 [4308] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00303') order by MerchantsCode
2020-01-07 20:37:25,632 [9104] DEBUG Servicemms_rentOut - 获取实体对象
2020-01-07 20:37:25,633 [9104] DEBUG Mms - select mms_rentOut.* from mms_rentOut where  BillNo =  '201306140001'
2020-01-07 20:37:25,636 [9104] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2020-01-07 20:37:25,636 [9104] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:25,637 [9104] DEBUG Mms - select top 1 BillNo from mms_rentOut where  ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:37:25,638 [9104] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:25,638 [9104] DEBUG Mms - select top 1 BillNo from mms_rentOut where  BillNo < '201306140001'and ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:37:25,640 [9104] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:25,640 [9104] DEBUG Mms - select top 1 BillNo from mms_rentOut where  BillNo >  '201306140001'and ProjectCode =  '201306030001' order by BillNo
2020-01-07 20:37:25,641 [9104] DEBUG Servicemms_rentOut - 获取字段
2020-01-07 20:37:25,641 [9104] DEBUG Mms - select top 1 BillNo from mms_rentOut where  ProjectCode =  '201306030001' order by BillNo desc
2020-01-07 20:37:26,178 [8856] DEBUG ServiceModelBase - 获取动态列表
2020-01-07 20:37:26,179 [8856] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00302') order by MerchantsCode
2020-01-07 20:37:26,359 [1852] DEBUG Servicemms_rentOut - 获取动态列表
2020-01-07 20:37:26,361 [1852] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo
     from 
        mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId
     where  A.BillNo =  '201306140001' order by A.MaterialCode
2020-01-07 20:37:48,699 [1852] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/report/warehouseaccount')
2020-01-07 20:37:51,253 [4272] DEBUG Mms - 
Select mms_warehouseStockHistory.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStockHistory.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where  mms_warehouse.ProjectCode='201306030001' 
order by mms_warehouseStockHistory.CreateDate desc
                
2020-01-07 20:38:01,801 [2092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/report/materialwarnning')
2020-01-07 20:38:02,490 [9104] DEBUG Mms - 
Select mms_materialWarnning.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_materialWarnning
Left join mms_material on mms_material.MaterialCode=mms_materialWarnning.MaterialCode
Where mms_materialWarnning.ProjectCode='201306030001' 
                
2020-01-07 20:38:02,563 [7380] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode=''
                
2020-01-07 20:38:07,689 [7440] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/warehouse/Index','/Mms/warehouse')
2020-01-07 20:38:09,862 [6052] DEBUG Servicemms_project - 获取动态列表
2020-01-07 20:38:09,862 [6052] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2020-01-07 20:38:09,917 [5716] DEBUG Servicemms_warehouse - 获取实体列表
2020-01-07 20:38:09,919 [5716] DEBUG Mms - select top 20 mms_warehouse.* from mms_warehouse order by WarehouseCode
2020-01-07 20:38:09,938 [5716] DEBUG Mms - select count(*) from ( select mms_warehouse.* from mms_warehouse ) tb_temp
2020-01-07 20:38:14,404 [3992] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Mms/material/Index','/Mms/material')
2020-01-07 20:38:16,321 [7440] DEBUG Servicemms_materialType - 获取动态列表
2020-01-07 20:38:16,321 [7440] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2020-01-07 20:38:16,362 [4272] DEBUG Servicemms_material - 获取实体列表
2020-01-07 20:38:16,363 [4272] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2020-01-07 20:38:16,384 [4272] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2020-01-07 20:38:46,696 [6052] DEBUG Servicemms_materialType - 获取动态列表
2020-01-07 20:38:46,696 [6052] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2020-01-07 20:42:38,769 [8652] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-07 20:42:46,739 [7196] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:42:46,788 [7196] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:42:46,803 [7196] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:42:46,804 [7196] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:42:46,815 [7196] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:42:46,816 [7196] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:42:47,424 [2092] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 20:42:47,457 [2092] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 20:42:47,907 [3992] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:42:51,722 [6052] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:43:45,919 [3992] DEBUG Servicesys_menu - 编辑记录
2020-01-07 20:43:45,959 [3992] DEBUG Servicesys_menu - 获取动态对象
2020-01-07 20:43:45,969 [3992] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '540e0ccc-a6f3-4d23-9f7f-b61ed69fd2a7'
2020-01-07 20:43:46,001 [3992] DEBUG Sys - insert into 
        sys_menu
    ([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('角色额','10012','10000','icon-bug_error','/erp/role','true','true','10','超级管理员','2020/1/7 20:43:45','超级管理员','2020/1/7 20:43:45')
2020-01-07 20:43:46,016 [3992] DEBUG Servicesys_menu - 获取动态对象
2020-01-07 20:43:46,017 [3992] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9920'
2020-01-07 20:43:46,035 [3992] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '产品测试', [MenuCode] = '9920', [ParentCode] = '98', [IconClass] = 'icon-application_side_list', [URL] = '/mms/product', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '', [UpdatePerson] = '超级管理员', [UpdateDate] = '2020/1/7 20:43:46' where  MenuCode =  '9920'
2020-01-07 20:43:46,090 [3992] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[{"_id":"540e0ccc-a6f3-4d23-9f7f-b61ed69fd2a7","MenuName":"角色额","MenuCode":"10012","ParentCode":"10000","IconClass":"icon-bug_error","URL":"/erp/role","IsVisible":"true","IsEnable":"true","MenuSeq":"10"}],"updated":[{"_id":"9920","MenuName":"产品测试","MenuCode":"9920","ParentCode":"98","IconClass":"icon-application_side_list","URL":"/mms/product","IsVisible":"true","IsEnable":"true","MenuSeq":""}],"_changed":true}}','2020/1/7 20:43:46')
2020-01-07 20:43:46,355 [7440] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 20:43:46,356 [7440] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 20:44:11,347 [2092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-07 20:44:11,371 [2092] DEBUG Servicesys_user - 获取动态列表
2020-01-07 20:44:11,372 [2092] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-07 20:44:11,375 [2092] DEBUG Servicesys_organize - 获取动态列表
2020-01-07 20:44:11,376 [2092] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-07 20:44:13,368 [8856] DEBUG Servicesys_role - 获取实体列表
2020-01-07 20:44:13,370 [8856] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-07 20:44:17,121 [1852] DEBUG Servicesys_permission - 获取动态列表
2020-01-07 20:44:17,122 [1852] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2020-01-07 20:44:17,125 [7440] DEBUG Sys - select * from sys_button order by ButtonSeq
2020-01-07 20:44:17,158 [7440] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2020-01-07 20:44:17,427 [7440] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2020-01-07 20:44:22,500 [6052] DEBUG Servicesys_role - 修改角色菜单权限
2020-01-07 20:44:22,507 [6052] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2020-01-07 20:44:22,514 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2020-01-07 20:44:22,522 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1019')
2020-01-07 20:44:22,527 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2020-01-07 20:44:22,528 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2020-01-07 20:44:22,529 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2020-01-07 20:44:22,530 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2020-01-07 20:44:22,531 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2020-01-07 20:44:22,532 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2020-01-07 20:44:22,533 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2020-01-07 20:44:22,534 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2020-01-07 20:44:22,535 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2020-01-07 20:44:22,536 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2020-01-07 20:44:22,536 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2020-01-07 20:44:22,537 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2020-01-07 20:44:22,538 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2020-01-07 20:44:22,539 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0101')
2020-01-07 20:44:22,540 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2020-01-07 20:44:22,546 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2020-01-07 20:44:22,547 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2020-01-07 20:44:22,548 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2020-01-07 20:44:22,549 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2020-01-07 20:44:22,550 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2020-01-07 20:44:22,551 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2020-01-07 20:44:22,552 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2020-01-07 20:44:22,553 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2020-01-07 20:44:22,554 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2020-01-07 20:44:22,555 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2020-01-07 20:44:22,555 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2020-01-07 20:44:22,556 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2020-01-07 20:44:22,557 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2020-01-07 20:44:22,558 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2020-01-07 20:44:22,559 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2020-01-07 20:44:22,560 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2020-01-07 20:44:22,561 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2020-01-07 20:44:22,562 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2020-01-07 20:44:22,563 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2020-01-07 20:44:22,564 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2020-01-07 20:44:22,564 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2020-01-07 20:44:22,565 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2020-01-07 20:44:22,566 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2020-01-07 20:44:22,567 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2020-01-07 20:44:22,568 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2020-01-07 20:44:22,569 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2020-01-07 20:44:22,574 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2020-01-07 20:44:22,575 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2020-01-07 20:44:22,577 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2020-01-07 20:44:22,578 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2020-01-07 20:44:22,579 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2020-01-07 20:44:22,579 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2020-01-07 20:44:22,580 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2020-01-07 20:44:22,581 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2020-01-07 20:44:22,582 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2020-01-07 20:44:22,583 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2020-01-07 20:44:22,584 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2020-01-07 20:44:22,585 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2020-01-07 20:44:22,586 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2020-01-07 20:44:22,587 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2020-01-07 20:44:22,587 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2020-01-07 20:44:22,588 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2020-01-07 20:44:22,589 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2020-01-07 20:44:22,590 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2020-01-07 20:44:22,591 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2020-01-07 20:44:22,592 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10000')
2020-01-07 20:44:22,597 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10001')
2020-01-07 20:44:22,598 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10010')
2020-01-07 20:44:22,599 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10012')
2020-01-07 20:44:22,600 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10002')
2020-01-07 20:44:22,601 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10003')
2020-01-07 20:44:22,602 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10004')
2020-01-07 20:44:22,603 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10005')
2020-01-07 20:44:22,604 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10006')
2020-01-07 20:44:22,605 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10007')
2020-01-07 20:44:22,605 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10008')
2020-01-07 20:44:22,606 [6052] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10009')
2020-01-07 20:44:22,614 [6052] DEBUG Servicesys_role - 修改角色菜单按钮权限
2020-01-07 20:44:22,616 [6052] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2020-01-07 20:44:22,620 [6052] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2020-01-07 20:44:22,628 [6052] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2020-01-07 20:44:22,634 [6052] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2020-01-07 20:44:22,648 [6052] DEBUG Servicesys_role - 修改角色数据权限
2020-01-07 20:44:22,650 [6052] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2020-01-07 20:44:22,659 [6052] DEBUG Servicesys_role - 修改角色数据列权限
2020-01-07 20:44:22,665 [6052] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2020-01-07 20:44:22,680 [6052] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2020-01-07 20:44:23,843 [3992] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:44:24,256 [8856] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:44:25,280 [2092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-07 20:44:25,286 [2092] DEBUG Servicesys_user - 获取动态列表
2020-01-07 20:44:25,286 [2092] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-07 20:44:25,287 [2092] DEBUG Servicesys_organize - 获取动态列表
2020-01-07 20:44:25,287 [2092] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-07 20:44:25,896 [7440] DEBUG Servicesys_role - 获取实体列表
2020-01-07 20:44:25,897 [7440] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-07 20:44:41,655 [2092] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/role/Index','/Erp/role')
2020-01-07 20:44:41,676 [2092] DEBUG Servicesys_user - 获取动态列表
2020-01-07 20:44:41,676 [2092] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-07 20:44:41,694 [2092] DEBUG Servicesys_organize - 获取动态列表
2020-01-07 20:44:41,695 [2092] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-07 20:44:43,528 [6052] DEBUG Servicesys_role - 获取实体列表
2020-01-07 20:44:43,528 [6052] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-07 20:46:46,359 [9064] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2020-01-07 20:46:57,648 [8856] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-07 20:46:59,726 [1852] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 20:46:59,727 [1852] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 20:47:00,166 [2092] DEBUG Servicesys_user - 获取实体列表
2020-01-07 20:47:00,166 [2092] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 20:47:00,203 [2092] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 20:47:02,602 [8856] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'scy'
2020-01-07 20:47:05,767 [2092] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 20:47:05,767 [2092] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'scy'
2020-01-07 20:48:30,317 [5932] DEBUG Sys - 
 select A1.UserName as MemberName ,A1.UserCode as MemberCode,'user' as MemberType
  from sys_user A1
 where A1.UserCode in (select B1.UserCode from sys_userRoleMap B1 where B1.RoleCode = 'super')
union
 select A2.OrganizeName as MemberName ,A2.OrganizeCode as MemberCode,'organize' as MemberType
   from sys_organize A2
  where A2.OrganizeCode in (select B2.OrganizeCode from sys_organizeRoleMap B2 where B2.RoleCode = 'super')
2020-01-07 20:49:25,442 [5932] DEBUG Sys - select * from sys_button order by ButtonSeq
2020-01-07 20:49:25,445 [5932] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2020-01-07 20:49:25,530 [8764] DEBUG Servicesys_permission - 获取动态列表
2020-01-07 20:49:25,558 [5932] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2020-01-07 20:49:25,630 [8764] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2020-01-07 20:49:30,063 [8900] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-07 20:49:30,066 [8900] DEBUG Servicesys_user - 获取动态列表
2020-01-07 20:49:30,067 [8900] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-07 20:49:30,070 [8900] DEBUG Servicesys_organize - 获取动态列表
2020-01-07 20:49:30,070 [8900] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-07 20:49:30,407 [8856] DEBUG Servicesys_role - 获取实体列表
2020-01-07 20:49:30,408 [8856] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-07 20:49:32,544 [2092] DEBUG Sys - select * from sys_button order by ButtonSeq
2020-01-07 20:49:32,547 [2092] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2020-01-07 20:49:32,625 [4108] DEBUG Servicesys_permission - 获取动态列表
2020-01-07 20:49:32,626 [4108] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2020-01-07 20:49:32,692 [2092] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2020-01-07 20:50:21,771 [5932] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-07 20:50:22,251 [8764] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 20:50:22,251 [8764] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 20:50:22,545 [9064] DEBUG Servicesys_user - 获取实体列表
2020-01-07 20:50:22,545 [9064] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 20:50:22,551 [9064] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 20:50:24,619 [8856] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 20:50:24,619 [8856] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'scy'
2020-01-07 20:54:50,173 [7064] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:54:50,202 [7064] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:54:50,209 [7064] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:54:50,210 [7064] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:54:50,217 [7064] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:54:50,217 [7064] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 20:54:50,943 [9144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-07 20:54:51,006 [7392] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:54:55,541 [9784] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:54:55,979 [10008] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:54:56,121 [4220] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:54:56,428 [7392] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-07 20:54:56,679 [9784] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 20:54:56,689 [9784] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 20:55:35,555 [8700] DEBUG Servicesys_menu - 编辑记录
2020-01-07 20:55:35,594 [8700] DEBUG Servicesys_menu - 获取动态对象
2020-01-07 20:55:35,602 [8700] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '10012'
2020-01-07 20:55:35,631 [8700] DEBUG Sys - update 
        sys_menu
     set [MenuName] = '角色额', [MenuCode] = '10012', [ParentCode] = '10000', [IconClass] = 'icon-bug_error', [URL] = '/erp/user', [IsVisible] = 'true', [IsEnable] = 'true', [MenuSeq] = '10', [UpdatePerson] = '超级管理员', [UpdateDate] = '2020/1/7 20:55:35' where  MenuCode =  '10012'
2020-01-07 20:55:35,690 [8700] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[],"updated":[{"_id":"10012","MenuName":"角色额","MenuCode":"10012","ParentCode":"10000","IconClass":"icon-bug_error","URL":"/erp/user","IsVisible":"true","IsEnable":"true","MenuSeq":"10"}],"_changed":true}}','2020/1/7 20:55:35')
2020-01-07 20:55:35,922 [6208] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 20:55:35,922 [6208] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 20:55:37,769 [9556] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:55:38,031 [9144] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:55:39,253 [4220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-07 20:55:40,292 [5364] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 20:55:40,293 [5364] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 20:55:44,316 [6324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/user/Index','/Erp/user')
2020-01-07 20:55:46,494 [4220] DEBUG Servicesys_user - 获取实体列表
2020-01-07 20:55:46,497 [4220] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 20:55:46,523 [4220] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 20:55:51,456 [8996] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/user/Index','/Erp/user')
2020-01-07 20:55:52,070 [9784] DEBUG Servicesys_user - 获取实体列表
2020-01-07 20:55:52,070 [9784] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 20:55:52,074 [9784] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 20:57:14,693 [6208] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/user/Index','/Erp/user')
2020-01-07 20:57:16,697 [9556] DEBUG Servicesys_user - 获取实体列表
2020-01-07 20:57:16,697 [9556] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 20:57:16,701 [9556] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 20:58:57,464 [4220] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 20:58:57,473 [4220] DEBUG Servicebase_data - 获取动态列表
2020-01-07 20:58:57,474 [4220] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 20:58:59,946 [9784] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 20:58:59,947 [9784] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 20:58:59,963 [9784] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 20:59:02,346 [10016] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 20:59:02,625 [9556] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 20:59:03,482 [6208] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 20:59:03,485 [6208] DEBUG Servicebase_data - 获取动态列表
2020-01-07 20:59:03,486 [6208] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 20:59:04,303 [5364] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 20:59:04,303 [5364] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 20:59:04,306 [5364] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:00:04,809 [5364] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:00:05,139 [10016] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:00:06,151 [10008] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:00:06,154 [10008] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:00:06,154 [10008] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:00:07,294 [5364] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:00:07,294 [5364] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:00:07,295 [5364] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:02:26,271 [6208] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-07 21:02:27,880 [4556] DEBUG Servicesys_user - 获取实体列表
2020-01-07 21:02:27,881 [4556] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 21:02:27,883 [4556] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 21:02:27,958 [8496] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 21:02:27,958 [8496] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 21:03:58,117 [8496] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:03:58,664 [6324] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:03:59,632 [9768] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:03:59,635 [9768] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:03:59,646 [9768] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:04:26,444 [9768] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:04:27,085 [6208] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:04:28,177 [10016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:04:28,181 [10016] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:04:28,181 [10016] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:04:50,524 [9768] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:04:51,286 [10016] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:04:52,473 [4556] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:04:52,478 [4556] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:04:52,478 [4556] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:05:00,629 [10008] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:05:01,176 [5364] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:05:02,288 [10084] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:05:02,292 [10084] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:05:02,292 [10084] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:05:09,336 [3140] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:05:09,643 [9768] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:05:10,761 [5364] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:05:10,785 [5364] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:05:10,786 [5364] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:05:53,577 [9552] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:05:53,885 [6208] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:05:54,887 [5364] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:05:54,891 [5364] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:05:54,892 [5364] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:07:16,979 [2460] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:07:17,018 [2460] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:07:17,029 [2460] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:07:17,030 [2460] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:07:17,039 [2460] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:07:17,040 [2460] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:07:17,845 [4220] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:07:22,154 [2656] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:07:37,198 [9492] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/user/Index','/Erp/user')
2020-01-07 21:07:37,891 [10016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:07:38,571 [6324] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 21:07:38,586 [6324] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 21:07:38,632 [10124] DEBUG Servicesys_user - 获取实体列表
2020-01-07 21:07:38,632 [10124] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 21:07:38,652 [10124] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 21:08:12,979 [2656] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:08:13,736 [10008] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:08:14,810 [6324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:12:55,726 [8936] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:12:55,756 [8936] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:12:55,764 [8936] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:12:55,764 [8936] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:12:55,772 [8936] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:12:55,773 [8936] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:12:56,461 [10124] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:12:59,251 [6208] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:12:59,778 [9552] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:12:59,894 [9768] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:13:00,308 [9552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:13:00,322 [9552] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:13:00,336 [9552] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:13:21,769 [9872] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:13:22,857 [2656] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:13:23,841 [9552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:13:23,847 [9552] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:13:23,847 [9552] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:13:32,589 [10016] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:13:32,590 [10016] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:13:32,608 [10016] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:14:51,853 [6208] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:14:51,859 [6208] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:14:51,860 [6208] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:16:38,556 [3140] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:16:39,129 [6208] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:16:40,062 [9552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:16:40,065 [9552] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:16:40,065 [9552] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:16:41,634 [6748] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:16:41,634 [6748] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:16:41,635 [6748] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:17:38,037 [5868] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:17:39,076 [9768] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:17:47,658 [8780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:17:47,661 [8780] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:17:47,661 [8780] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:17:49,548 [3140] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:17:49,548 [3140] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:17:49,549 [3140] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:18:40,846 [2656] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:18:41,648 [9492] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:18:42,751 [10124] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:18:42,754 [10124] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:18:42,754 [10124] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:18:44,678 [3140] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:18:44,679 [3140] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:18:44,679 [3140] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:19:28,417 [6748] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:19:29,510 [9768] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:19:30,750 [8780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:19:30,754 [8780] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:19:30,754 [8780] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:19:32,359 [10008] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:19:32,359 [10008] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:19:32,360 [10008] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:20:14,979 [3140] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:20:16,814 [9552] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:20:22,509 [6748] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:20:22,511 [6748] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:20:22,511 [6748] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:20:23,232 [8780] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:20:23,232 [8780] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:20:23,232 [8780] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:20:33,788 [10196] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:20:34,784 [10196] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:20:35,730 [9872] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:20:35,732 [9872] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:20:35,733 [9872] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:20:37,884 [8780] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:20:37,884 [8780] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:20:37,885 [8780] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:23:30,950 [10744] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:23:32,534 [4808] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:23:33,483 [8780] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:23:33,487 [8780] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:23:33,487 [8780] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:23:38,845 [6208] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:23:38,846 [6208] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:23:38,847 [6208] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:26:08,089 [10744] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:26:09,523 [10124] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:26:15,943 [11168] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/location/Index','/Erp/location')
2020-01-07 21:26:16,574 [11152] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:26:16,579 [11152] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:26:16,579 [11152] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:26:23,877 [9316] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:26:23,877 [9316] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:26:23,878 [9316] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:27:57,759 [8688] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:27:59,111 [7424] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:28:04,466 [5868] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:28:04,523 [5868] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:28:04,525 [5868] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:28:10,614 [1616] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:28:10,614 [1616] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:28:10,615 [1616] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:28:37,577 [1616] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:28:39,271 [7424] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:28:40,254 [8688] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:28:40,257 [8688] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:28:40,257 [8688] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:28:49,379 [1616] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:28:49,380 [1616] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:28:49,384 [1616] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:30:30,761 [8040] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:30:32,304 [9472] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:30:33,224 [5740] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:30:33,226 [5740] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:30:33,226 [5740] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:30:35,903 [9472] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:30:35,904 [9472] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:30:35,904 [9472] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:31:11,508 [8040] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:31:12,831 [10560] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:31:13,683 [8040] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:31:13,686 [8040] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:31:13,686 [8040] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:32:00,211 [9472] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:32:01,056 [1120] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:32:01,778 [1120] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:32:01,781 [1120] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:32:01,781 [1120] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:32:04,831 [8040] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:32:04,831 [8040] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:32:04,832 [8040] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:33:20,435 [11212] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-07 21:33:23,128 [11176] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 21:33:23,129 [11176] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 21:33:23,151 [8040] DEBUG Servicesys_user - 获取实体列表
2020-01-07 21:33:23,152 [8040] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 21:33:23,164 [8040] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 21:33:25,824 [8968] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 21:33:25,825 [8968] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'scy'
2020-01-07 21:34:03,720 [1120] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:34:04,781 [9472] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:34:05,801 [8040] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:34:06,779 [11212] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:34:06,781 [11212] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:34:06,781 [11212] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:34:09,221 [9472] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:34:09,221 [9472] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:34:09,221 [9472] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:34:22,346 [10560] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:34:22,348 [10560] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:34:59,049 [9472] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/user/Index','/Sys/user')
2020-01-07 21:35:01,793 [8040] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 21:35:01,793 [8040] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 21:35:02,136 [6652] DEBUG Servicesys_user - 获取实体列表
2020-01-07 21:35:02,137 [6652] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2020-01-07 21:35:02,142 [6652] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2020-01-07 21:35:04,457 [6652] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 21:35:04,458 [6652] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'scy'
2020-01-07 21:35:13,093 [11176] DEBUG Servicesys_userSetting - 编辑记录
2020-01-07 21:35:13,125 [11176] DEBUG Servicesys_userSetting - 获取动态对象
2020-01-07 21:35:13,133 [11176] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  ID =  '6'
2020-01-07 21:35:13,169 [11176] DEBUG Sys - update sys_userSetting set [UserCode] = 'scy', [SettingCode] = 'theme', [SettingName] = '', [SettingValue] = 'default', [Description] = '' where  ID =  '6'
2020-01-07 21:35:15,754 [8040] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 21:35:15,765 [8040] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'guest'
2020-01-07 21:35:28,862 [10560] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:35:29,436 [6652] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:35:30,502 [10552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:35:30,505 [10552] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:35:30,505 [10552] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:35:31,634 [11176] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:35:31,634 [11176] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:35:31,639 [11176] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:35:35,975 [11176] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:35:35,975 [11176] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:36:25,901 [11176] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:36:26,627 [10560] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:36:27,301 [9316] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:36:27,303 [9316] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:36:27,303 [9316] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:36:28,584 [10552] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:36:28,584 [10552] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:36:28,586 [10552] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:36:33,747 [10552] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:36:33,747 [10552] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:36:44,231 [10552] DEBUG Servicebase_technology - 编辑记录
2020-01-07 21:36:44,231 [10552] DEBUG Servicebase_technology - 获取动态对象
2020-01-07 21:36:44,232 [10552] DEBUG Erp - select base_technology.* from base_technology where  id =  ''
2020-01-07 21:36:44,250 [10552] DEBUG Erp - insert into base_technology([parts_id],[name],[orderby],[remark],[create_username],[create_time]) values('1','111','1','33','超级管理员','2020/1/7 21:36:44')
2020-01-07 21:36:47,705 [10560] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:36:47,720 [10560] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:36:55,792 [10560] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:36:56,426 [11176] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:36:57,298 [10552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:36:57,300 [10552] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:36:57,300 [10552] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:36:58,587 [10552] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:36:58,587 [10552] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:36:58,588 [10552] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:37:00,146 [11176] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:37:00,146 [11176] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:37:34,076 [10552] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:37:34,679 [6652] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:37:35,551 [8772] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:37:35,553 [8772] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:37:35,553 [8772] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:37:36,503 [5040] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:37:36,504 [5040] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:37:36,505 [5040] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:37:38,217 [5040] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:37:38,217 [5040] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:38:39,883 [7832] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 21:38:39,883 [7832] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'guest'
2020-01-07 21:40:52,469 [7832] DEBUG Servicesys_userSetting - 获取实体列表
2020-01-07 21:40:52,469 [7832] DEBUG Sys - select sys_userSetting.* from sys_userSetting where  UserCode =  'guest'
2020-01-07 21:41:28,324 [9864] DEBUG Sys - 
select distinct A.OrganizeCode,A.OrganizeName,A.ParentCode
,(case when B.UserCode is null then 'false' else 'true' end) as Checked
from sys_organize A
left join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode and B.UserCode = 'scy'
2020-01-07 21:41:49,626 [2232] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:41:50,335 [6652] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:41:54,220 [2232] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:41:54,293 [2232] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:41:54,293 [2232] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:41:55,045 [7832] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:41:55,046 [7832] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:41:55,053 [7832] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:42:00,345 [11212] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-07 21:42:01,180 [9864] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 21:42:01,180 [9864] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 21:42:09,783 [10552] DEBUG Servicesys_menu - 编辑记录
2020-01-07 21:42:09,783 [10552] DEBUG Servicesys_menu - 获取动态对象
2020-01-07 21:42:09,796 [10552] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '10012'
2020-01-07 21:42:09,800 [10552] DEBUG Sys - 
--删除角色字段Map
delete sys_roleMenuColumnMap
where id in 
(
select sys_roleMenuColumnMap.id
from sys_roleMenuColumnMap
left join sys_menu on sys_menu.menucode=sys_roleMenuColumnMap.menucode
where sys_menu.menucode='10012'
)

--删除角色菜单Map
delete sys_roleMenuMap
where id in 
(
select sys_roleMenuMap.id
from sys_roleMenuMap
left join sys_menu on sys_menu.menucode=sys_roleMenuMap.menucode
where sys_menu.menucode='10012'
)

--删除菜单按钮Map
delete sys_menuButtonMap
where sys_menuButtonMap.id in 
(
select id 
from sys_menuButtonMap
left join sys_menu on sys_menu.menucode=sys_menuButtonMap.menucode
where sys_menu.menucode='10012'
) 
2020-01-07 21:42:09,863 [10552] DEBUG Sys - delete from 
        sys_menu
     where  MenuCode =  '10012'
2020-01-07 21:42:09,892 [10552] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('super','超级管理员','api/mms/send','菜单数据','修改','{"list":{"deleted":[{"_id":"10012","MenuName":"角色额","MenuCode":"10012","ParentCode":"10000","IconClass":"icon-bug_error","URL":"/erp/user","IsVisible":true,"IsEnable":true,"MenuSeq":"10"}],"inserted":[],"updated":[],"_changed":true}}','2020/1/7 21:42:09')
2020-01-07 21:42:10,051 [2232] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 21:42:10,051 [2232] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 21:42:11,812 [9316] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:42:11,973 [9864] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:42:12,469 [10552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2020-01-07 21:42:12,850 [9316] DEBUG Servicesys_menu - 获取动态列表
2020-01-07 21:42:12,850 [9316] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2020-01-07 21:42:15,519 [6652] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:42:15,523 [6652] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:42:15,523 [6652] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:42:16,138 [2232] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:42:16,139 [2232] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:42:16,140 [2232] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:42:18,051 [11176] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:42:18,052 [11176] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:42:39,523 [11212] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9930' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2020-01-07 21:42:43,783 [6652] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2020-01-07 21:42:43,871 [6652] DEBUG Servicesys_organize - 获取实体列表
2020-01-07 21:42:43,871 [6652] DEBUG Sys - select sys_organize.* from sys_organize
2020-01-07 21:42:44,355 [9316] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-07 21:42:44,363 [9316] DEBUG Servicesys_user - 获取动态列表
2020-01-07 21:42:44,364 [9316] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-07 21:42:44,365 [9316] DEBUG Servicesys_organize - 获取动态列表
2020-01-07 21:42:44,365 [9316] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-07 21:42:46,380 [10552] DEBUG Servicesys_role - 获取实体列表
2020-01-07 21:42:46,381 [10552] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-07 21:42:48,115 [6652] DEBUG Sys - select * from sys_button order by ButtonSeq
2020-01-07 21:42:48,122 [6652] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2020-01-07 21:42:48,196 [7832] DEBUG Servicesys_permission - 获取动态列表
2020-01-07 21:42:48,197 [7832] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2020-01-07 21:42:48,253 [6652] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2020-01-07 21:43:36,181 [2232] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:43:36,934 [9316] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
2020-01-07 21:43:37,761 [9864] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Sys/role/Index','/Sys/role')
2020-01-07 21:43:37,764 [9864] DEBUG Servicesys_user - 获取动态列表
2020-01-07 21:43:37,764 [9864] DEBUG Sys - select UserCode,UserName from sys_user
2020-01-07 21:43:37,764 [9864] DEBUG Servicesys_organize - 获取动态列表
2020-01-07 21:43:37,765 [9864] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2020-01-07 21:43:38,641 [11176] DEBUG Servicesys_role - 获取实体列表
2020-01-07 21:43:38,641 [11176] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2020-01-07 21:43:39,648 [6652] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:43:39,686 [6652] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:43:39,687 [6652] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:43:40,325 [9112] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:43:40,325 [9112] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:43:40,326 [9112] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:43:41,504 [9864] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:43:41,505 [9864] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:44:14,742 [7832] DEBUG Servicebase_technology - 编辑记录
2020-01-07 21:44:14,743 [7832] DEBUG Servicebase_technology - 获取动态对象
2020-01-07 21:44:14,760 [7832] DEBUG Erp - select base_technology.* from base_technology where  id =  ''
2020-01-07 21:44:14,771 [7832] DEBUG Erp - insert into base_technology([parts_id],[name],[orderby],[remark],[create_username],[create_time]) values('1','111','22','33','超级管理员','2020/1/7 21:44:14')
2020-01-07 21:44:16,630 [11212] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:44:16,644 [11212] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:44:19,368 [11176] DEBUG Servicebase_technology - 编辑记录
2020-01-07 21:44:19,369 [11176] DEBUG Servicebase_technology - 获取动态对象
2020-01-07 21:44:19,369 [11176] DEBUG Erp - select base_technology.* from base_technology where  id =  '2'
2020-01-07 21:44:19,371 [11176] DEBUG Erp - delete from base_technology where  id =  '2'
2020-01-07 21:44:22,180 [10552] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'super'
and C.URL in ('/Erp/parts/Index','/Erp/parts')
2020-01-07 21:44:22,185 [10552] DEBUG Servicebase_data - 获取动态列表
2020-01-07 21:44:22,185 [10552] DEBUG Erp - select name as value,name as text from base_data where  type =  '部件'and isenable =  '1'
2020-01-07 21:44:22,832 [11212] DEBUG Servicebase_parts - 获取动态列表
2020-01-07 21:44:22,832 [11212] DEBUG Erp - select top 20 * from base_Parts order by id
2020-01-07 21:44:22,836 [11212] DEBUG Erp - select count(*) from ( select * from base_Parts ) tb_temp
2020-01-07 21:44:23,729 [11176] DEBUG Servicebase_technology - 获取实体列表
2020-01-07 21:44:23,730 [11176] DEBUG Erp - select base_technology.* from base_technology where  parts_id =  '1'
2020-01-07 21:45:16,793 [7344] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:45:16,839 [7344] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:45:16,849 [7344] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:45:16,849 [7344] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:45:16,858 [7344] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:45:16,858 [7344] DEBUG Erp - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2020-01-07 21:45:17,798 [7832] DEBUG Sys - select * from sys_userSetting where UserCode='super'
2020-01-07 21:45:21,070 [9112] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'super' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'super'
  )  
)
order by B.MenuSeq,B.MenuCode
